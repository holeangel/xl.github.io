<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://res.wx.qq.com https://res2.wx.qq.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://res.wx.qq.com https://res2.wx.qq.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://*.qq.com; connect-src * 'self'; form-action 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="ALLOW-FROM https://weixin110.qq.com">
    <meta http-equiv="Referrer-Policy" content="no-referrer-when-downgrade">
    <!-- 微信分享信息设置 -->
    <meta property="og:title" content="心理测试报告">
    <meta property="og:description" content="专业心理测评结果报告，帮助您了解自己的心理状态">
    <meta property="og:image" content="http://你的域名/images/logo.png">
    <meta property="og:url" content="http://你的域名/report.html">
    <title>症状自评量表报告</title>
    <link rel="stylesheet" href="static/css/life001.web.prod.css">
    <link rel="stylesheet" href="static/css/footer-nav.css">
    <!-- MBTI报告增强样式 -->
    <link rel="stylesheet" href="static/css/mbti-report.css">
    <script src="static/js/vue.global.prod.min.js"></script>
    <script src="static/js/auth.js"></script>
    <!-- 微信JS-SDK -->
    <script src="static/js/jweixin-1.6.0.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "PingFang SC", "Hiragino Sans GB", "WenQuanYi Micro Hei", sans-serif;
            line-height: 1.6;
            color: #2d3748;
            margin: 0;
            padding: 0;
            background: #f7fafc;
        }

        .header {
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .back-button {
            color: #4a5568;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .back-button:hover {
            background: #f7fafc;
        }

        .page-title {
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            font-weight: bold;
            color: #2d3748;
            text-align: center;
            flex: 1;
            margin-right: 2.5rem;
        }

        .main-content {
            max-width: 800px; /* 还原回原来的800px宽度 */
            margin: 6rem auto 2rem;
            padding: clamp(1rem, 5vw, 2rem);
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-size: clamp(1.5rem, 4vw, 1.8rem);
            color: #2d3748;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .score-table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        /* 优化表格样式，防止文字换行 */
        .score-table th,
        .score-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
            white-space: nowrap; /* 防止文字换行 */
        }
        
        /* 设置列宽 */
        .score-table th:first-child,
        .score-table td:first-child {
            width: 15%; /* 维度列 */
        }
        
        .score-table th:nth-child(2),
        .score-table td:nth-child(2) {
            width: 10%; /* 原始分列 */
        }
        
        .score-table th:nth-child(3),
        .score-table td:nth-child(3) {
            width: 10%; /* 均分列 */
        }
        
        .score-table th:nth-child(4),
        .score-table td:nth-child(4) {
            width: 12%; /* 水平列 */
        }
        
        .score-table th:nth-child(5),
        .score-table td:nth-child(5) {
            width: 53%; /* 解释列，使用剩余宽度 */
        }

        /* 修复表格头部文字换行问题 */
        .score-table th {
            background: #f7fafc;
            font-weight: 600;
            color: #2d3748;
            white-space: nowrap; /* 防止文字换行 */
        }

        .score-table tr:last-child td {
            border-bottom: none;
        }

        .score-table tr:hover {
            background: #f7fafc;
        }
        
        /* 宽屏优化表格样式 */
        @media (min-width: 1200px) {
            .score-table th,
            .score-table td {
                padding: 1.25rem;
                font-size: 1.05rem;
            }
            
            .score-table {
                border-radius: 0.75rem;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            }
            
            /* 交替行颜色，提高可读性 */
            .score-table tr:nth-child(even) {
                background-color: #f9fafc;
            }
            
            .score-table tr:hover {
                background: #f0f4ff;
                transition: background-color 0.2s ease;
            }
        }

        .dimension-name {
            font-weight: 500;
            color: #2d3748;
        }

        .score-value {
            font-weight: 600;
            color: #667eea;
        }
        
        .score-value-large {
            font-size: 2.8rem; /* 从原来的3.5rem调小到2.8rem */
            font-weight: 700;
            color: white; /* 在深色背景上使用白色文字 */
            line-height: 1;
        }
        
        .score-overview {
            display: flex;
            align-items: center;
            justify-content: center; /* 水平居中 */
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
            width: 100%; /* 确保占满容器宽度 */
        }
        
        /* 总评分圆形容器样式 */
        .total-score-circle {
            position: relative;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, #48bb78 0%, #276749 100%); /* 改为绿色系渐变色，体现健康感 */
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: none; /* 移除边框 */
            margin: 0 auto; /* 添加水平居中 */
        }
        
        /* 总评分内容样式 */
        .score-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 100%;
            height: 100%;
        }
        
        /* 总评分标签样式 */
        .score-label {
            font-size: 1rem;
            color: white; /* 在深色背景上使用白色文字 */
            margin-bottom: 0.5rem;
        }
        
        .score-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 200px;
        }
        
        /* 宽屏下评分概览布局 */
        @media (min-width: 1200px) {
            .summary-info {
                display: flex;
                justify-content: space-between;
                align-items: stretch;
            }
            
            .score-overview {
                flex: 2;
                justify-content: flex-start;
                padding-right: 2rem;
            }
            
            .score-scale {
                flex: 3;
                margin: 2rem 0;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }
            
            .total-score-circle {
                width: 200px;
                height: 200px;
            }
            
            .score-value-large {
                font-size: 3rem;
            }
            
            .score-details p {
                font-size: 1.1rem;
                margin-bottom: 1rem;
            }
        }
        
        .score-details p {
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        
        /* 移除了箭头相关样式 */

        .score-level {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: #edf2f7;
            border-radius: 0.25rem;
            font-weight: 500;
            color: #2d3748;
        }

        .level-normal {
            background: #c6f6d5;
            color: #2f855a;
        }

        .level-mild {
            background: #fefcbf;
            color: #975a16;
        }

        .level-moderate {
            background: #fed7d7;
            color: #c53030;
        }

        .level-severe {
            background: #b794f4;
            color: #553c9a;
        }
        
        /* 新增严重级别的样式，使用更深的紫色 */
        .level-extreme {
            background: #805ad5;
            color: #ffffff;
        }
        
        /* 针对量表中的颜色 */
        .scale-segment.active:nth-child(1) {
            background: linear-gradient(135deg, #48bb78, #2f855a);
        }
        
        .scale-segment.active:nth-child(2) {
            background: linear-gradient(135deg, #ecc94b, #975a16);
        }
        
        .scale-segment.active:nth-child(3) {
            background: linear-gradient(135deg, #f56565, #c53030);
        }
        
        .scale-segment.active:nth-child(4) {
            background: linear-gradient(135deg, #9f7aea, #553c9a);
        }
        
        .scale-segment.active:nth-child(5) {
            background: linear-gradient(135deg, #805ad5, #44337a);
        }

        .level-short {
            display: none; /* 默认隐藏短文本 */
        }

        .level-full {
            display: inline; /* 默认显示完整文本 */
        }

        .analysis-section {
            margin-top: 2rem;
        }

        .analysis-item {
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            background: #f7fafc;
            border-radius: 0.5rem;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .analysis-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .analysis-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .analysis-title::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 1.2em;
            background: #667eea;
            margin-right: 0.5rem;
            border-radius: 2px;
        }

        .analysis-text {
            color: #4a5568;
            line-height: 1.8;
        }

        .analysis-text p {
            margin-bottom: 1rem;
        }

        .analysis-text ul, 
        .analysis-text ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .analysis-text li {
            margin-bottom: 0.5rem;
        }

        .score-scale {
            margin: 0.5rem 0;
            padding: 0;
            background: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .scale-bar {
            position: relative;
            height: 24px;
            background: #e2e8f0;
            border-radius: 4px;
            margin: 2rem 0;
            overflow: hidden;
            display: flex;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 0;
        }

        /* 量表段默认样式 */
        .scale-segment {
            flex: 1;
            height: 100%;
            background: #e2e8f0;
            border-right: 0.5px solid rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scale-segment:last-child {
            border-right: none;
        }

        /* 移除了通用的 active 样式，改为使用特定的 nth-child 选择器 */
        .scale-segment.active:nth-child(1) {
            background: linear-gradient(135deg, #48bb78, #2f855a);
        }
        
        .scale-segment.active:nth-child(2) {
            background: linear-gradient(135deg, #ecc94b, #975a16);
        }
        
        .scale-segment.active:nth-child(3) {
            background: linear-gradient(135deg, #f56565, #c53030);
        }
        
        .scale-segment.active:nth-child(4) {
            background: linear-gradient(135deg, #9f7aea, #553c9a);
        }
        
        .scale-segment.active:nth-child(5) {
            background: linear-gradient(135deg, #805ad5, #44337a);
        }

        .segment-label {
            color: #2d3748;
            font-size: 0.9rem;
            font-weight: 500;
            text-align: center;
            padding: 0.25rem;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .scale-segment.active .segment-label {
            color: white;
        }

        .scale-segment:hover .segment-label {
            transform: scale(1.1);
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            padding: 0 0.5rem;
            margin-top: 0.5rem;
        }

        .scale-labels span {
            background: white;
            padding: 0.35rem 0.75rem;
            border-radius: 0.5rem;
            color: #2d3748;
            font-size: 0.95rem;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            position: relative;
        }

        .scale-labels span::after {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid white;
        }

        .scale-labels span:hover {
            background: #f7fafc;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .analysis-item:hover .score-indicator {
            transform: translate(-50%, -50%) scale(1.15);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .analysis-item:hover .score-indicator::after {
            border-bottom-color: #5a67d8;
        }

        .warning-text {
            color: #c53030;
            font-weight: 500;
            padding: 0.75rem;
            background: #fff5f5;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }

        .score-range {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: #edf2f7;
            border-radius: 0.25rem;
            font-weight: 500;
            color: #2d3748;
        }

        .screening-criteria {
            background: #f0f9ff;
            border-left-color: #3182ce;
        }

        .score-meaning {
            background: #f0fff4;
            border-left-color: #48bb78;
        }
        
        /* 总体分析和建议区域样式 */
        .overall-analysis {
            margin-top: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #ebf8ff;
            border-radius: 0.5rem;
            border-left: 4px solid #4299e1;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .overall-analysis-title {
            margin-bottom: 0.75rem;
            padding-bottom: 0.35rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c5282;
            border-bottom: 1px solid #bee3f8;
            text-align: center;
        }
        
        .analysis-content {
            color: #2d3748;
            line-height: 1.8;
        }
        
        /* 添加段落间距和样式 */
        .analysis-content p, .overall-analysis-text p {
            margin-bottom: 1rem;
            text-indent: 2em; /* 添加首行缩进 */
        }
        
        .analysis-content p:last-child, .overall-analysis-text p:last-child {
            margin-bottom: 0;
        }
        
        /* 添加因子分析的样式 */
        .factor-analysis {
            margin-top: 1rem;
        }
        
        .analysis-subtitle {
            margin: 1rem 0 0.5rem 0;
            font-size: 1rem;
            font-weight: 500;
            color: #3182ce;
            border-left: 3px solid #4299e1;
            padding-left: 0.5rem;
        }
        
        .factor-analysis-content, .factor-advice-content {
            margin-left: 1rem;
            text-indent: 0;
            line-height: 1.8;
        }
        
        .factor-advice-content {
            margin-bottom: 1rem;
        }
        
        .advice-content {
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px dashed #bee3f8;
            color: #2d3748;
            line-height: 1.8;
        }
        
        /* 添加建议标题样式 */
        .advice-section h3, .advice-highlight {
            margin-bottom: 0.75rem;
            font-weight: 500;
            color: #2b6cb0;
            padding-left: 0.5rem;
            border-left: 3px solid #3182ce;
        }
        
        .advice-list {
            margin-left: 1.2rem;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .advice-list li {
            margin-bottom: 0.5rem;
        }
        
        .advice-highlight {
            font-weight: 500;
            color: #2b6cb0;
        }

        @media (max-width: 640px) {
            .main-content {
                margin: 5rem 1rem 1rem;
                padding: 1rem;
            }
            
            .total-score-circle {
                width: 120px;
                height: 120px;
                margin: 0 auto; /* 确保在移动设备上也居中 */
                background: linear-gradient(135deg, #48bb78 0%, #276749 100%); /* 确保移动设备上也使用相同的绿色渐变 */
            }
            
            .score-value-large {
                font-size: 2rem; /* 更小的字体尺寸 */
            }
            
            .score-label {
                font-size: 0.9rem;
            }
            
            .score-overview {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem; /* 减小间距 */
                width: 100%;
                margin: 1rem 0; /* 减小上下外边距 */
            }
            
            /* 优化移动端下的评分详情区域 */
            .score-details {
                border: 1px solid #e2e8f0;
                border-radius: 0.5rem;
                padding: 0.75rem 1rem;
                background-color: #f8fafc;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
                width: 100%;
                margin-top: 0.5rem;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 0.25rem 0.75rem;
            }
            
            .score-details p {
                margin: 0.15rem 0;
                line-height: 1.3;
                font-size: 0.92rem;
                white-space: nowrap; /* 防止文字换行 */
                overflow: hidden;
                text-overflow: ellipsis; /* 超出部分显示省略号 */
            }
            
            /* 对于双相量表，两个维度均分单独占一行 */
            .score-details p:nth-last-child(1),
            .score-details p:nth-last-child(2) {
                grid-column: 1 / -1;
            }
            
            /* 优化移动端下的评分量表 */
            .score-scale {
                margin: 1rem 0;
            }
            
            .scale-bar {
                height: 22px;
                margin: 1rem 0;
            }
            
            .segment-label {
                font-size: 0.85rem;
            }

            .header-content {
                padding: 0.75rem 1rem;
            }

            .score-table {
                display: block;
                overflow-x: auto;
                margin: 1rem 0; /* 减少表格上下外边距 */
                white-space: nowrap; /* 整个表格不换行 */
            }

            .score-table th,
            .score-table td {
                padding: 0.75rem 0.5rem; /* 减小水平内边距 */
                font-size: 0.9rem;
                white-space: nowrap; /* 确保移动端也不换行 */
            }
            
            /* 移动端下优化表格列宽 */
            .score-table th:first-child,
            .score-table td:first-child {
                min-width: 70px; /* 维度列最小宽度 */
            }
            
            .score-table th:nth-child(2),
            .score-table td:nth-child(2),
            .score-table th:nth-child(3),
            .score-table td:nth-child(3) {
                min-width: 60px; /* 原始分和均分列最小宽度 */
            }
            
            .score-table th:nth-child(4),
            .score-table td:nth-child(4) {
                min-width: 50px; /* 水平列最小宽度 */
            }
            
            .score-table th:nth-child(5),
            .score-table td:nth-child(5) {
                min-width: 120px; /* 解释列最小宽度 */
            }

            .score-level .level-short {
                display: inline; /* 小屏幕显示短文本 */
            }
            
            .score-level .level-full {
                display: none; /* 小屏幕隐藏长文本 */
            }
        }

        @media (max-width: 480px) {
            .main-content {
                margin: 4rem 0.5rem 1rem;
                padding: 0.75rem;
            }

            .header-content {
                padding: 0.5rem;
            }

            .back-button {
                padding: 0.25rem 0.5rem;
            }

            .score-table th,
            .score-table td {
                padding: 0.5rem 0.4rem; /* 进一步减小水平内边距 */
                font-size: 0.85rem;
            }
            
            /* 最小屏幕下的评分详情使用单列布局 */
            .score-details {
                grid-template-columns: 1fr;
                font-size: 0.9rem;
                padding: 0.6rem 0.8rem;
            }
            
            .score-details p {
                white-space: nowrap; /* 小屏幕下更重要，保证不换行 */
                font-size: 0.9rem; /* 稍微减小字体大小 */
            }
            
            /* 最小屏下总评分圆圈再缩小 */
            .total-score-circle {
                width: 110px;
                height: 110px;
            }
            
            .score-value-large {
                font-size: 1.9rem;
            }
            
            /* 最小屏幕下评分量表更小 */
            .scale-bar {
                height: 20px;
                margin: 0.75rem 0;
            }
            
            /* 最小屏幕下优化表格显示 */
            .score-table {
                font-size: 0.8rem; /* 整体缩小表格字体 */
            }
            
            /* 调整最小屏幕下的表格列宽 */
            .score-table th:first-child,
            .score-table td:first-child {
                min-width: 60px; /* 减小维度列宽度 */
            }
            
            .score-table th:nth-child(2),
            .score-table td:nth-child(2),
            .score-table th:nth-child(3),
            .score-table td:nth-child(3) {
                min-width: 50px; /* 减小分数列宽度 */
            }
        }

        .nav-text {
            font-weight: bold;
        }

        /* 宽屏布局样式 */
        @media (min-width: 1200px) {
            .main-content {
                max-width: 800px; /* 保持原来的宽度 */
            }
            
            /* 恢复原来的垂直布局 */
            .analysis-section {
                display: block;
            }
            
            /* 恢复分析项目基本样式 */
            .analysis-item {
                margin-bottom: 1.5rem;
                padding: 1.5rem;
                background: #f7fafc;
                border-radius: 0.5rem;
                border-left: 4px solid #667eea;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            }
            
            /* 所有项目使用统一边框颜色 */
            .analysis-item:nth-of-type(4n+1),
            .analysis-item:nth-of-type(4n+2),
            .analysis-item:nth-of-type(4n+3),
            .analysis-item:nth-of-type(4n+4) {
                border-left-color: #667eea;
            }
            
            /* 总体分析样式 */
            .overall-analysis {
                padding: 1.5rem;
                background: #ebf8ff;
            }
            
            .overall-analysis-title {
                font-size: 1.2rem;
                text-align: center;
            }
        }

        .reference-text {
            color: #4a5568;
            line-height: 1.6;
        }
        
        /* MBTI报告样式 */
        .mbti-report-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin: 2rem 0;
            overflow: hidden;
        }
        
        .mbti-personality-card {
            background: linear-gradient(135deg, #f6ffed 0%, #d9f7be 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 1px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }
        
        .mbti-personality-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }
        
        .mbti-card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            padding-bottom: 1rem;
        }
        
        .mbti-type-code {
            font-size: 2.5rem;
            font-weight: 700;
            color: #52c41a;
            margin-right: 1rem;
            font-family: 'Montserrat', sans-serif;
        }
        
        .mbti-type-name {
            font-size: 1.2rem;
            color: #2d3748;
            font-weight: 500;
            flex: 1;
        }
        
        .mbti-card-content {
            color: #4a5568;
            line-height: 1.6;
            font-size: 1rem;
        }
        
        .mbti-dimensions {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        .mbti-dimensions h3 {
            margin-top: 0;
            color: #2d3748;
            font-size: 1.3rem;
            border-bottom: 1px solid #edf2f7;
            padding-bottom: 0.8rem;
            margin-bottom: 1rem;
        }
        
        .mbti-career-section, .mbti-characteristics, .mbti-interaction-guide {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-left: 4px solid #722ed1;
        }
        
        .mbti-career-section h3, .mbti-characteristics h3, .mbti-interaction-guide h3 {
            margin-top: 0;
            color: #2d3748;
            font-size: 1.3rem;
            border-bottom: 1px solid #edf2f7;
            padding-bottom: 0.8rem;
            margin-bottom: 1rem;
            color: #722ed1;
        }
        
        .mbti-interaction-guide {
            border-left: 4px solid #fa8c16;
        }
        
        .mbti-interaction-guide h3 {
            color: #fa8c16;
        }
        
        .mbti-career-content {
            color: #4a5568;
            line-height: 1.6;
        }
        
        .mbti-career-content ul {
            padding-left: 1.5rem;
            margin-bottom: 1.2rem;
        }
        
        .mbti-career-content li {
            margin-bottom: 0.5rem;
            position: relative;
        }
        
        .mbti-career-content li::before {
            content: "•";
            color: #722ed1;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
        
        .mbti-career-content p strong {
            color: #2d3748;
            font-weight: 600;
        }
        
        .mbti-scores {
            margin: 1.5rem 0;
            background: #f9f9f9;
            border-radius: 0.8rem;
            padding: 1.2rem;
        }
        
        .mbti-score-item {
            margin-bottom: 1rem;
        }
        
        .dimension-pair {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .score-bar {
            display: flex;
            height: 24px;
            border-radius: 12px;
            overflow: hidden;
            background: #f0f0f0;
        }
        
        .e-score, .s-score, .t-score, .j-score {
            background: #1890ff;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .i-score, .n-score, .f-score, .p-score {
            background: #13c2c2;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <div id="app" class="cogni">
        <header class="header">
            <div class="header-content">
                <button class="back-button" @click="goBack">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <div class="page-title">{{ testTitle }}</div>
            </div>
        </header>

        <main class="main-content">
            <div class="result-section">
                <h2 class="section-title" style="text-align: center;">测试结果</h2>
                <div class="score-overview">
                    <div class="total-score-circle" v-if="testType !== 'bsq'">
                        <div class="score-content">
                            <div class="score-label">总评分</div>
                            <div class="score-value-large">{{totalScore}}</div>
                        </div>
                    </div>
                    <div class="score-details">
                        <p>均分：{{averageScore.toFixed(2)}}</p>
                        <p v-if="testType === 'sds' || testType === 'sas'">标准分：{{standardScore}}</p>
                        <p>阳性项目数：{{positiveItems}}</p>
                        <p>阳性症状均分：{{positiveAverageScore.toFixed(2)}}</p>
                        <p v-if="testType === 'bsq'">躁狂维度均分：{{manicScore ? manicScore.toFixed(2) : '0.00'}}</p>
                        <p v-if="testType === 'bsq'">抑郁维度均分：{{depressiveScore ? depressiveScore.toFixed(2) : '0.00'}}</p>
                    </div>
                </div>
            </div>

            <div class="score-scale">
                <div class="scale-bar" v-if="testType === 'scl90'">
                    <div class="scale-segment" :class="{ active: averageScore < 1.5 }">
                        <span class="segment-label">
                            <span class="level-full">正常</span>
                            <span class="level-short">正</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: averageScore >= 1.5 && averageScore < 2.5 }">
                        <span class="segment-label">
                            <span class="level-full">轻度</span>
                            <span class="level-short">轻</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: averageScore >= 2.5 && averageScore < 3.5 }">
                        <span class="segment-label">
                            <span class="level-full">中度</span>
                            <span class="level-short">中</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: averageScore >= 3.5 && averageScore < 4.5 }">
                        <span class="segment-label">
                            <span class="level-full">偏重</span>
                            <span class="level-short">偏</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: averageScore >= 4.5 }">
                        <span class="segment-label">
                            <span class="level-full">严重</span>
                            <span class="level-short">重</span>
                        </span>
                    </div>
                </div>
                
                <div class="scale-bar" v-if="testType === 'sds' || testType === 'sas'">
                    <div class="scale-segment" :class="{ active: standardScore < 50 }">
                        <span class="segment-label">
                            <span class="level-full">正常</span>
                            <span class="level-short">正</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: standardScore >= 50 && standardScore < 60 }">
                        <span class="segment-label">
                            <span class="level-full">轻度</span>
                            <span class="level-short">轻</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: standardScore >= 60 && standardScore < 70 }">
                        <span class="segment-label">
                            <span class="level-full">中度</span>
                            <span class="level-short">中</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: standardScore >= 70 && standardScore < 80 }">
                        <span class="segment-label">
                            <span class="level-full">偏重</span>
                            <span class="level-short">偏</span>
                        </span>
                    </div>
                    <div class="scale-segment" :class="{ active: standardScore >= 80 }">
                        <span class="segment-label">
                            <span class="level-full">严重</span>
                            <span class="level-short">重</span>
                        </span>
                    </div>
                </div>
                
            </div>

            <!-- 添加表格模块 -->
            <!-- 仅在非SAS和非SDS测试类型时显示各维度评估结果 -->
            <div v-if="testType !== 'sas' && testType !== 'sds'&& testType !== 'bsq'&& testType !== 'mbti'">
                <h3 class="section-title" style="font-size: 1.4rem; margin-top: 1.5rem; margin-bottom: 1rem;">各维度评估结果</h3>
                <table class="score-table">
                    <thead>
                        <tr>
                            <th>维度</th>
                            <th>原始分</th>
                            <th>均分</th>
                            <th>水平</th>
                            <th>解释</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="(score, dimension) in results" :key="dimension">
                            <td class="dimension-name">{{dimension}}</td>
                            <td class="score-value">{{Math.round(getRawScore(dimension))}}</td>
                            <td class="score-value">{{score.toFixed(2)}}</td>
                            <td>
                                <span class="score-level" :class="{
                                    'level-normal': score < 1.5,
                                    'level-mild': score >= 1.5 && score < 2.5,
                                    'level-moderate': score >= 2.5 && score < 3.5,
                                    'level-severe': score >= 3.5 && score < 4.5,
                                    'level-extreme': score >= 4.5
                                }">
                                    <span class="level-full">{{getLevelText(score)}}</span>
                                    <span class="level-short">{{getShortLevelText(score)}}</span>
                                </span>
                            </td>
                            <td>{{getScoreExplanation(score)}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 分析报告标题 -->
            <div class="analysis-section">
                <h2 class="section-title">分析报告</h2>
                
                <!-- SCL-90报告模板 -->
                <div v-if="testType === 'scl90'">
                    <!-- SCL-90总体分析和建议 -->
                    <div class="overall-analysis">
                        <div class="overall-analysis-title">SCL-90症状自评量表总体分析与建议</div>
                        <div class="analysis-content">
                            <!-- 根据均分不同范围显示不同的分析内容 -->
                            <p v-if="averageScore < 1.5">
                                您的SCL-90总均分为<strong>{{averageScore.toFixed(2)}}</strong>，处于<strong>正常范围</strong>，总分为<strong>{{totalScore}}</strong>分。
                            </p>
                            <p v-if="averageScore < 1.5">
                                根据临床心理学标准分析，您目前的心理状态良好，未表现出明显的精神症状学异常。各维度表现均在正常范围内，适应能力和心理弹性较强，能够有效应对日常生活中的压力和挑战。
                            </p>
                            <p v-else-if="averageScore < 2.5">
                                您的SCL-90总均分为<strong>{{averageScore.toFixed(2)}}</strong>，提示存在<strong>轻度心理健康问题</strong>，总分为<strong>{{totalScore}}</strong>分。
                            </p>
                            <p v-else-if="averageScore < 2.5">
                                根据临床心理学评估标准，您当前可能面临一定的心理压力，在某些维度上出现轻微异常，心理平衡状态受到轻度干扰，但整体适应功能尚未受到明显影响。
                            </p>
                            <p v-else-if="averageScore < 2.5">
                                这种状态通常与环境压力、生活事件变化或短期应激反应有关，通过自我调节和适当干预，多数情况下可以得到改善。
                            </p>
                            <p v-else-if="averageScore < 3.5">
                                您的SCL-90总均分为<strong>{{averageScore.toFixed(2)}}</strong>，提示存在<strong>中度心理健康问题</strong>，总分为<strong>{{totalScore}}</strong>分。
                            </p>
                            <p v-else-if="averageScore < 3.5">
                                根据临床心理学评估标准，您当前心理状态不佳，多个维度出现异常，心理防御机制功能受损，心理压力较大，可能影响日常生活、工作或学习效率。
                            </p>
                            <p v-else-if="averageScore < 3.5">
                                这种状态可能源于长期压力积累、重要生活事件影响或潜在的心理障碍，建议寻求专业心理咨询或精神科帮助进行系统评估和干预。
                            </p>
                            <p v-else-if="averageScore < 4.5">
                                您的SCL-90总均分为<strong>{{averageScore.toFixed(2)}}</strong>，提示存在<strong>偏重心理健康问题</strong>，总分为<strong>{{totalScore}}</strong>分。
                            </p>
                            <p v-else-if="averageScore < 4.5">
                                根据临床心理学评估标准，您当前心理状态较差，多个维度表现明显异常，心理痛苦感强烈，已明显影响日常功能、人际关系和社会适应能力。
                            </p>
                            <p v-else-if="averageScore < 4.5">
                                您可能经历显著的痛苦、困扰或失调感，这种状态可能与潜在的精神心理障碍相关。强烈建议尽快寻求专业心理医生或精神科医生的系统评估与治疗。
                            </p>
                            <p v-else>
                                您的SCL-90总均分为<strong>{{averageScore.toFixed(2)}}</strong>，提示存在<strong>严重心理健康问题</strong>，总分为<strong>{{totalScore}}</strong>分。
                            </p>
                            <p v-else>
                                根据临床心理学评估标准，您当前心理状态非常不佳，多个维度表现严重异常，心理痛苦感极强，心理防御机制可能已严重损害，生活和社会功能受到严重影响。
                            </p>
                            <p v-else>
                                这种状态通常提示可能存在明确的精神心理障碍，需要综合干预。请立即寻求专业精神科医生的评估和治疗，可能需要考虑药物治疗、心理治疗等综合干预措施。
                            </p>
                            
                            <p>您本次测评的阳性项目数为<strong>{{positiveItems}}</strong>项（总共90项），阳性症状均分为<strong>{{positiveAverageScore.toFixed(2)}}</strong>。</p>
                            <p>阳性项目数反映了您出现精神症状的广泛性，阳性症状均分则反映了症状的严重程度。SCL-90量表从躯体化、强迫症状、人际敏感、抑郁、焦虑、敌对、恐怖、偏执和精神病性9个维度评估心理健康状况。</p>
                        </div>
                        <div class="advice-content">
                            <strong class="advice-highlight">专业建议：</strong>
                            <ul class="advice-list" v-if="averageScore < 1.5">
                                <li>继续保持健康的生活方式和积极的心态，规律作息、均衡饮食、适度运动</li>
                                <li>培养情绪觉察能力，定期进行自我心理评估，关注心理健康状况变化</li>
                                <li>发展多元化的兴趣爱好和社会支持系统，增强心理资本</li>
                                <li>学习基础的压力管理和情绪调节技巧，如正念冥想、渐进性肌肉放松</li>
                                <li>保持良好的人际边界和沟通模式，建立健康的人际关系网络</li>
                            </ul>
                            <ul class="advice-list" v-else-if="averageScore < 2.5">
                                <li>改善生活作息规律，保证7-8小时充足睡眠，每周进行3-5次有氧运动</li>
                                <li>学习系统的减压技术，如生物反馈放松训练、正念认知疗法(MBCT)、正念减压疗法(MBSR)</li>
                                <li>调整工作和学习节奏，运用时间管理技术，设定合理边界，避免过度劳累</li>
                                <li>增强社会支持网络，寻求朋友和家人的情感支持，避免社交孤立</li>
                                <li>减少刺激性物质摄入（咖啡因、酒精、尼古丁），增加健康饮食和水分摄入</li>
                                <li>考虑寻求专业心理咨询，学习认知重构技术，改变不合理认知模式</li>
                            </ul>
                            <ul class="advice-list" v-else-if="averageScore < 3.5">
                                <li>建议寻求专业心理咨询或心理治疗，如认知行为疗法(CBT)、接纳与承诺疗法(ACT)等循证治疗方法</li>
                                <li>学习系统的压力管理和情绪调节方法，包括呼吸控制、认知重构、问题解决技术</li>
                                <li>建立社会支持系统，加入支持性小组，培养开放沟通的能力</li>
                                <li>考虑寻求精神科医生评估，确定是否存在心理障碍及其性质和严重程度</li>
                                <li>规划合理的作息和工作安排，避免过度紧张和压力积累</li>
                                <li>结合生物-心理-社会模型，采用综合干预策略，解决心理健康问题</li>
                            </ul>
                            <ul class="advice-list" v-else-if="averageScore < 4.5">
                                <li>强烈建议尽快寻求专业心理医生或精神科医生的综合评估，考虑进行标准化心理测验</li>
                                <li>可能需要整合药物治疗和心理治疗的综合方案，遵医嘱进行系统治疗</li>
                                <li>征求家人或亲友提供社会支持和理解，避免社交孤立，建立支持系统</li>
                                <li>调整生活和工作安排，减轻压力源，创建支持性环境</li>
                                <li>学习危机管理策略，制定情绪危机应对计划和安全保障措施</li>
                                <li>进行规律的随访和治疗效果评估，根据需要调整干预方案</li>
                            </ul>
                            <ul class="advice-list" v-else>
                                <li>请立即寻求专业精神科医生的评估和治疗，必要时考虑住院治疗</li>
                                <li>遵医嘱规范服用处方药物，不要自行停药或调整剂量</li>
                                <li>需要家人全程陪伴和监护，提供安全稳定的环境</li>
                                <li>制定综合治疗计划，包括生物治疗(药物)、心理治疗和社会功能康复</li>
                                <li>建立长期随访和复发预防机制，监测症状变化</li>
                                <li>逐步恢复社会功能，循序渐进地重新适应工作和生活</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- SDS报告模板 -->
                <div v-if="testType === 'sds'">
                    <!-- SDS总体分析和建议 -->
                    <div class="overall-analysis">
                        <div class="overall-analysis-title">SDS抑郁自评量表总体分析与建议</div>
                        <div class="overall-analysis-text">
                            <p v-if="standardScore < 53">
                                您的SDS标准分为<strong>{{standardScore}}</strong>，处于<strong>正常范围</strong>（原始分<strong>{{totalScore}}</strong>）。测评结果表明您目前未呈现明显的抑郁症状。
                            </p>
                            <p v-if="standardScore < 53">
                                根据临床心理学标准，这表明您当前的情绪状态保持稳定，对生活保持积极态度，情感体验丰富多样，能够从日常活动中获得愉悦感。
                            </p>
                            <p v-if="standardScore < 53">
                                您的思维、睡眠、食欲和社交功能正常，自我评价合理，对未来持有积极期待。
                            </p>
                            <p v-else-if="standardScore < 63">
                                您的SDS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>轻度抑郁</strong>（原始分<strong>{{totalScore}}</strong>）。测评结果表明您当前存在一定程度的情绪低落、兴趣减退和疲劳感，但尚未达到临床抑郁障碍的诊断标准。
                            </p>
                            <p v-else-if="standardScore < 63">
                                您可能出现间歇性的悲伤、忧虑或情绪低落，对平常感兴趣的活动热情有所下降，可能还伴有轻微的睡眠问题或胃口变化。
                            </p>
                            <p v-else-if="standardScore < 63">
                                这些症状可能与近期生活压力、工作学习负担、关系变动或暂时的挫折体验有关。
                            </p>
                            <p v-else-if="standardScore < 73">
                                您的SDS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>中度抑郁</strong>（原始分<strong>{{totalScore}}</strong>）。
                            </p>
                            <p v-else-if="standardScore < 73">
                                根据临床心理学标准，这一结果表明您近期可能经常感到明显的情绪低落，持续的兴趣或愉悦感降低，精力不足或疲劳感增加，并可能伴有睡眠障碍（入睡困难、早醒或睡眠过多）、食欲和体重变化（增加或减少）和社交退缩等表现。
                            </p>
                            <p v-else-if="standardScore < 73">
                                您的思维可能变得缓慢，注意力、记忆力和决策能力可能受到影响，自我评价偏向于负面。这些症状已经对您的日常生活、工作学习效率以及人际关系产生了明显影响。
                            </p>
                            <p v-else-if="standardScore < 83">
                                您的SDS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>偏重抑郁</strong>（原始分<strong>{{totalScore}}</strong>）。
                            </p>
                            <p v-else-if="standardScore < 83">
                                根据精神医学评估标准，这一结果表明您目前情绪状态较差，表现为持续的强烈情绪低落（可能全天存在或晨重暮轻），对几乎所有活动都丧失兴趣和愉悦感，精力严重不足，同时伴有明显的睡眠障碍、食欲显著下降、心境恶化、精神运动性迟滞或激越、无价值感和/或不适当的内疚感，可能还有反复的死亡思想。
                            </p>
                            <p v-else-if="standardScore < 83">
                                您的认知功能（如注意力、记忆力）受到显著影响，社会功能（工作能力、社交活动、自我照顾能力）明显下降。这一状态表明您可能符合重度抑郁发作的部分临床特征。
                            </p>
                            <p v-else>
                                您的SDS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>严重抑郁</strong>（原始分<strong>{{totalScore}}</strong>）。
                            </p>
                            <p v-else>
                                根据国际精神病学诊断标准（如DSM-5和ICD-11），这一结果表明您目前情绪状态非常差，几乎持续地感到极度痛苦和绝望，完全丧失兴趣和愉悦感，严重的疲劳和动力缺乏，伴有显著的睡眠和饮食障碍，严重的认知功能损害（如决策能力和注意力极度下降），自我贬低和强烈的无价值感，思维迟滞，以及可能存在的自伤或自杀观念。
                            </p>
                            <p v-else>
                                您的社会功能可能已经受到严重损害，甚至难以执行基本的自我照顾活动。此状态极有可能符合重度抑郁障碍的临床诊断标准，并属于需要立即干预的程度。
                            </p>
                            
                            <p>您本次测评的原始分为<strong>{{totalScore}}</strong>分（总分80分），标准分为<strong>{{standardScore}}</strong>分（原始分×1.25），阳性项目数为<strong>{{positiveItems}}</strong>项（总共20项）。</p>
                            <p>在中国精神医学标准化评定中，SDS标准分≥53分通常被视为存在抑郁倾向，≥63分提示中度抑郁，≥73分提示偏重抑郁，≥83分提示严重抑郁。</p>
                            
                            <div class="advice-section">
                                <h3>建议</h3>
                                <div v-if="standardScore < 53">
                                    <ul>
                                        <li>保持积极健康的生活方式，确保规律的作息时间（每晚7-8小时睡眠）</li>
                                        <li>定期进行身体活动，每周至少150分钟中等强度有氧运动</li>
                                        <li>养成情绪日记习惯，提高情绪觉察力，关注情绪变化</li>
                                        <li>培养积极的兴趣爱好和社交活动，增强心理弹性</li>
                                        <li>学习基础的认知调节技术，如认知重评、表达性写作等</li>
                                        <li>保持健康的饮食习惯，确保充足的ω-3脂肪酸、B族维生素和镁等营养素摄入</li>
                            </ul>
                                </div>
                                <div v-else-if="standardScore < 63">
                                    <ul>
                                        <li>结构化安排日常活动，每天制定可实现的小目标清单</li>
                                        <li>建立规律的运动习惯，每周3-5次30分钟有氧运动（如快走、慢跑、游泳等）</li>
                                        <li>练习正念冥想或渐进性肌肉松弛训练，每天15-20分钟</li>
                                        <li>记录情绪日记，识别情绪低落的触发因素和规律</li>
                                        <li>主动与亲友联系和交流，避免社交退缩</li>
                                        <li>学习基础认知行为技术，如"认知三栏表"，识别和挑战消极自动化思维</li>
                                        <li>如症状持续两周以上，建议寻求专业心理咨询</li>
                                        <li>限制酒精、咖啡因等物质摄入，保证充足水分和营养均衡</li>
                            </ul>
                                </div>
                                <div v-else-if="standardScore < 73">
                                    <ul>
                                        <li>强烈建议寻求专业心理健康服务，如认知行为疗法(CBT)、人际关系疗法(IPT)或接纳与承诺疗法(ACT)</li>
                                        <li>咨询精神科医生评估是否需要药物治疗（如选择性5-羟色胺再摄取抑制剂SSRI类抗抑郁药）</li>
                                        <li>制定并严格执行结构化的日常计划表，包括睡眠、进食、活动和休息时间</li>
                                        <li>设置渐进式的活动目标，从简单任务开始，逐步增加难度和持续时间</li>
                                        <li>进行温和且规律的体育活动，每次15-30分钟，每周3-4次</li>
                            </ul>
                                </div>
                                <div v-else-if="standardScore < 83">
                                    <ul>
                                        <li>强烈建议寻求专业心理健康服务，如认知行为疗法(CBT)、人际关系疗法(IPT)或接纳与承诺疗法(ACT)</li>
                                        <li>咨询精神科医生评估是否需要药物治疗（如选择性5-羟色胺再摄取抑制剂SSRI类抗抑郁药）</li>
                                        <li>制定并严格执行结构化的日常计划表，包括睡眠、进食、活动和休息时间</li>
                                        <li>设置渐进式的活动目标，从简单任务开始，逐步增加难度和持续时间</li>
                                        <li>进行温和且规律的体育活动，每次15-30分钟，每周3-4次</li>
                                        <li>考虑接受心理治疗，如认知行为疗法(CBT)、人际关系疗法(IPT)或接纳与承诺疗法(ACT)</li>
                                        <li>学习专业的情绪调节和应对技能，如辩证行为疗法(DBT)中的情绪调节技术</li>
                                        <li>向亲友明确表达您的需求，教育他们关于抑郁的知识，让他们了解如何支持您</li>
                                        <li>避免做重大决定，如离职、搬家或结束重要关系，直到症状改善</li>
                            </ul>
                                </div>
                                <div v-else-if="standardScore < 83">
                                    <ul>
                                        <li>请尽快前往精神专科医院或综合医院精神科进行专业评估</li>
                                        <li>可能需要综合治疗方案，包括合适的抗抑郁药物治疗和心理治疗相结合</li>
                                        <li>考虑更密集的治疗模式，如日间治疗项目或强化门诊治疗</li>
                                        <li>与医生讨论监测副作用和疗效的计划，定期随访评估</li>
                                        <li>家人应提供密切陪伴和情感支持，创造安全、稳定的生活环境</li>
                                        <li>评估自伤和自杀风险，制定安全计划，必要时移除家中危险物品</li>
                                        <li>减轻工作和社交压力，考虑短期休假或调整工作职责</li>
                                        <li>学习"行为活化"技术，即使没有动力也要坚持基本活动</li>
                                        <li>加入抑郁互助小组，获取同伴支持和理解</li>
                            </ul>
                                </div>
                                <div v-else>
                                    <ul>
                                        <li>立即就医！请前往精神专科医院或综合医院精神科急诊</li>
                                        <li>评估是否需要住院治疗，特别是存在严重自杀意念、精神运动性阻滞或拒食情况</li>
                                        <li>遵医嘱进行抗抑郁药物治疗，可能需要组合用药或考虑其他治疗模式</li>
                                        <li>严重抑郁可能需要考虑电痉挛治疗(ECT)、经颅磁刺激(TMS)或其他干预手段</li>
                                        <li>家人需要24小时陪护，确保患者安全，协助日常生活活动</li>
                                        <li>建立危机干预计划，包括紧急联系人和当地心理危机干预热线</li>
                                        <li>工作或学习可能需要暂停，医生可提供相关证明</li>
                                        <li>待急性期症状缓解后，制定长期康复计划，包括复发预防</li>
                                        <li>考虑参与结构化的"正念认知疗法(MBCT)"或"复发预防"项目</li>
                            </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- SAS报告模板 -->
                <div v-if="testType === 'sas'">
                    <!-- SAS总体分析和建议 -->
                    <div class="overall-analysis">
                        <div class="overall-analysis-title">SAS焦虑自评量表总体分析与建议</div>
                        <div class="analysis-content">
                            <!-- 根据标准分不同范围显示不同的分析内容 -->
                            <p v-if="standardScore < 50">
                                您的SAS标准分为<strong>{{standardScore}}</strong>，处于<strong>正常范围</strong>。
                            </p>
                            <p v-if="standardScore < 50">
                                测评结果显示您当前未表现出明显的焦虑症状，情绪状态平稳，压力应对能力良好，各项生理和心理功能正常。
                            </p>
                            <p v-else-if="standardScore < 60">
                                您的SAS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>轻度焦虑</strong>。
                            </p>
                            <p v-else-if="standardScore < 60">
                                测评结果显示您可能在特定情境下感到紧张不安，偶尔出现轻微的心慌、出汗、肌肉紧张等生理反应，但总体上焦虑程度轻微，尚未明显影响日常生活。
                            </p>
                            <p v-else-if="standardScore < 70">
                                您的SAS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>中度焦虑</strong>。
                            </p>
                            <p v-else-if="standardScore < 70">
                                测评结果显示您的焦虑情绪较为明显，可能经常感到紧张、担忧、恐惧，伴有心慌、呼吸急促、出汗、肌肉紧张等躯体症状，这些症状已经对日常生活和工作产生一定影响。
                            </p>
                            <p v-else-if="standardScore < 80">
                                您的SAS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>偏重焦虑</strong>。
                            </p>
                            <p v-else-if="standardScore < 80">
                                测评结果显示您目前处于持续的焦虑状态，伴有明显的自主神经系统症状（如心悸、胸闷、出汗、头晕）和肌肉紧张症状，可能出现惊恐发作，焦虑感已经严重干扰日常生活和社会功能。
                            </p>
                            <p v-else>
                                您的SAS标准分为<strong>{{standardScore}}</strong>，提示存在<strong>严重焦虑</strong>。
                            </p>
                            <p v-else>
                                测评结果显示您目前处于高度焦虑状态，伴有严重的躯体症状和持续的恐惧感，可能频繁出现惊恐发作，明显的回避行为，焦虑已经导致生活功能严重受损。
                            </p>
                            
                            <p>您本次测评的原始分为<strong>{{totalScore}}</strong>分（总分80分），阳性项目数为<strong>{{positiveItems}}</strong>项（总共20项）。</p>
                            <p>在SAS评估中，标准分≥50分通常被视为有焦虑倾向，≥60分提示明显焦虑症状。</p>
                        </div>
                        <div class="advice-content">
                            <strong class="advice-highlight">专业建议：</strong>
                            <ul class="advice-list" v-if="standardScore < 50">
                                <li>继续保持健康的生活方式和积极的压力管理习惯</li>
                                <li>定期锻炼身体，增强体质和心理抗压能力</li>
                                <li>学习基础的放松技巧，如深呼吸和简单的冥想</li>
                                <li>保持规律的作息时间，避免过度疲劳</li>
                                <li>培养健康的兴趣爱好，丰富业余生活</li>
                            </ul>
                            <ul class="advice-list" v-else-if="standardScore < 60">
                                <li>每天进行15-20分钟的深呼吸和渐进性肌肉放松训练</li>
                                <li>坚持规律运动，每周至少3次，每次30分钟以上</li>
                                <li>减少咖啡因等刺激性物质的摄入</li>
                                <li>学习简单的认知调整技巧，识别并挑战灾难化思维</li>
                                <li>保持充足睡眠，改善睡眠质量</li>
                                <li>记录焦虑情境和应对方式，提高自我觉察</li>
                                <li>如症状持续2周以上未改善，建议寻求心理咨询</li>
                            </ul>
                            <ul class="advice-list" v-else-if="standardScore < 70">
                                <li>建议寻求专业心理咨询，学习系统的焦虑管理技术</li>
                                <li>尝试认知行为疗法（CBT）或接受度与承诺疗法（ACT）</li>
                                <li>每天进行30分钟以上的系统放松训练</li>
                                <li>坚持规律的生活方式，避免过度劳累</li>
                                <li>减少工作或学习压力，合理安排任务</li>
                                <li>与家人和朋友交流感受，获得社会支持</li>
                                <li>考虑咨询精神科医生评估是否需要药物辅助治疗</li>
                            </ul>
                            <ul class="advice-list" v-else-if="standardScore < 80">
                                <li>强烈建议尽快咨询精神科医生进行专业评估</li>
                                <li>可能需要抗焦虑药物治疗配合心理治疗</li>
                                <li>家人应密切陪伴，给予理解和支持</li>
                                <li>减少环境刺激，创造安静、稳定的生活环境</li>
                                <li>制定应对焦虑发作的紧急预案</li>
                                <li>可能需要暂时调整工作或学习安排</li>
                                <li>考虑参与专业焦虑障碍互助小组</li>
                            </ul>
                            <ul class="advice-list" v-else>
                                <li>请立即寻求精神科医生的专业评估和治疗</li>
                                <li>需要专业的药物治疗和系统心理治疗</li>
                                <li>家人需要全程陪伴，防止独处</li>
                                <li>可能需要考虑专业机构干预或短期住院治疗</li>
                                <li>暂停重要工作和学习任务，优先恢复健康</li>
                                <li>制定详细的危机应对方案和长期康复计划</li>
                                <li>建立长期随访机制，预防复发</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- BSQ报告模板 -->
                <div v-if="testType === 'bsq'">
                    <!-- BSQ总体分析和建议 -->
                    <div class="overall-analysis">
                        <div class="overall-analysis-title">BSQ双相情感障碍筛查量表总体分析与建议</div>
                        <div class="analysis-content">
                            <!-- 根据抑郁和躁狂得分显示不同的分析内容 -->
                            <p v-if="depressiveScore < 3 && manicScore < 3">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>。测评结果表明您目前情绪状态稳定，未表现出明显的抑郁或躁狂症状。
                            </p>
                            <p v-else-if="depressiveScore >= 3 && depressiveScore < 4.5 && manicScore < 3">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，提示存在<strong>中至偏重度抑郁症状</strong>，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，处于正常范围。测评结果表明您可能存在明显的抑郁症状，如情绪低落、兴趣减退、精力不足、睡眠问题等。
                            </p>
                            <p v-else-if="depressiveScore < 3 && manicScore >= 3 && manicScore < 4.5">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，处于正常范围，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，提示存在<strong>中至偏重度躁狂症状</strong>。测评结果表明您可能存在明显的躁狂症状，如情绪高涨、精力增加、活动增多等。
                            </p>
                            <p v-else-if="depressiveScore >= 3 && depressiveScore < 4.5 && manicScore >= 3 && manicScore < 4.5">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，两个维度均提示存在<strong>中至偏重度症状</strong>。测评结果表明您同时存在明显的抑郁和躁狂症状，建议尽快就医进行专业评估。
                            </p>
                            <p v-else-if="depressiveScore >= 4.5 && manicScore < 3">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，提示存在<strong>严重抑郁症状</strong>，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，处于正常范围。建议立即就医评估，考虑重度抑郁发作。
                            </p>
                            <p v-else-if="depressiveScore < 3 && manicScore >= 4.5">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，处于正常范围，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，提示存在<strong>严重躁狂症状</strong>。建议立即就医评估和治疗。
                            </p>
                            <p v-else-if="depressiveScore >= 3 && depressiveScore < 4.5 && manicScore >= 4.5">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，提示存在<strong>中至偏重度抑郁症状</strong>，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，提示存在<strong>严重躁狂症状</strong>。建议立即就医接受专业评估和治疗。
                            </p>
                            <p v-else-if="depressiveScore >= 4.5 && manicScore >= 3 && manicScore < 4.5">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>，提示存在<strong>严重抑郁症状</strong>，躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，提示存在<strong>中至偏重度躁狂症状</strong>。建议立即就医接受专业评估和治疗。
                            </p>
                            <p v-else-if="depressiveScore >= 4.5 && manicScore >= 4.5">
                                您的BSQ双相情感障碍筛查结果显示，抑郁维度得分为<strong>{{depressiveScore.toFixed(2)}}</strong>和躁狂维度得分为<strong>{{manicScore.toFixed(2)}}</strong>，两个维度均提示存在<strong>严重症状</strong>。这是双相情感障碍混合状态的典型表现，请立即就医。
                            </p>
                            <p v-else>
                                您的分数处于特殊区间，请联系专业医生进一步评估。
                            </p>
                        </div>
                        <div class="advice-content">
                            <strong class="advice-highlight">专业建议：</strong>
                            <ul class="advice-list" v-if="depressiveScore < 3 && manicScore < 3">
                                <li>继续保持规律的生活方式和稳定的作息时间</li>
                                <li>保持适度的社交活动和体育锻炼</li>
                                <li>定期关注情绪变化，记录情绪状态</li>
                                <li>学习基础的情绪调节技巧，提升应对压力能力</li>
                                <li>建立良好的家庭和社会支持系统</li>
                            </ul>
                            <ul class="advice-list" v-else-if="(depressiveScore >= 3 && depressiveScore < 4.5) && (manicScore < 3)">
                                <li>建立稳定的作息时间表，避免睡眠不足</li>
                                <li>每天记录情绪变化，提高自我觉察能力</li>
                                <li>学习情绪调节技巧，如认知重评、深呼吸等</li>
                                <li>避免过度刺激的活动和环境，减少刺激性物质摄入</li>
                                <li>培养规律的运动习惯，每周至少3次，每次30分钟</li>
                                <li>如情绪波动持续或加剧，建议咨询专业心理医生</li>
                            </ul>
                            <ul class="advice-list" v-else-if="(depressiveScore >= 3 && depressiveScore < 4.5) && (manicScore >= 3 && manicScore < 4.5)">
                                <li>建议寻求专业心理医生评估，明确诊断</li>
                                <li>建立非常规律的生活和睡眠习惯，避免昼夜节律紊乱</li>
                                <li>制定情绪监测计划，每天记录情绪、睡眠、活动水平等</li>
                                <li>避免高压力环境和过度刺激的场合</li>
                                <li>与家人朋友保持开放沟通，让他们了解您的情绪变化特点</li>
                                <li>考虑接受心理治疗（如认知行为疗法、人际社会节律疗法）</li>
                                <li>咨询精神科医生评估是否需要药物干预</li>
                            </ul>
                            <ul class="advice-list" v-else-if="(depressiveScore >= 4.5 && manicScore < 3) || (depressiveScore < 3 && manicScore >= 4.5)">
                                <li>强烈建议尽快咨询精神科医生进行专业评估和治疗</li>
                                <li>可能需要药物治疗稳定情绪（如心境稳定剂）</li>
                                <li>家人需密切关注情绪变化，尤其是躁狂或抑郁症状加剧的迹象</li>
                                <li>建立严格规律的生活作息，绝对避免睡眠剥夺</li>
                                <li>减少工作压力和社交负担，创造稳定的环境</li>
                                <li>制定情绪危机应对计划，包括紧急联系人和就医途径</li>
                                <li>在医生指导下同时接受心理治疗，提高症状识别和管理能力</li>
                            </ul>
                            <ul class="advice-list" v-else>
                                <li>请立即寻求精神科医生的专业评估和治疗</li>
                                <li>需要专业药物治疗（如心境稳定剂、抗精神病药等）</li>
                                <li>家人需全程陪伴，防止冲动行为或自伤风险</li>
                                <li>考虑专业机构干预或住院治疗，尤其是在急性躁狂或严重抑郁期</li>
                                <li>建立长期治疗和康复计划，包括药物治疗、心理治疗和生活方式调整</li>
                                <li>制定复发预防策略，学习早期预警信号识别</li>
                                <li>参加双相情感障碍支持小组，获得同伴支持</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- MBTI报告模板 -->
                <div v-if="testType === 'mbti'">
                    <!-- MBTI总体分析和建议 -->
                    <div class="overall-analysis">
                        <div class="overall-analysis-title">MBTI人格类型分析与建议</div>
                        <div class="analysis-content">
                            <p>您的MBTI人格类型是<strong>{{personalityType}}</strong>（{{getMbtiTypeName(personalityType)}}）。</p>
                            
                            
                            
                            <p v-if="personalityType === 'ISTJ'">
                                <strong>ISTJ (尽责的检查者 | Logistician)</strong> - 内向感觉思考判断型
                            </p>
                            <p v-if="personalityType === 'ISTJ'">
                                您的人格类型属于ISTJ，在荣格心理类型理论中被称为"尽责的检查者"。您的认知功能堆栈由内向感觉(Si)作为主导功能，外向思考(Te)作为辅助功能，内向感受(Fi)作为第三功能，以及外向直觉(Ne)作为劣势功能组成。这种认知结构使您具有强烈的责任感、系统性思维和对秩序与结构的重视。
                            </p>
                            <p v-if="personalityType === 'ISTJ'">
                                作为ISTJ，您的内向感觉(Si)主导功能使您能够精确记忆过去的经验和细节，并将其作为决策的基础。您倾向于通过比较新信息与已知事实来理解世界，重视传统、可靠性和一致性。您的辅助功能外向思考(Te)使您能够有条理地组织外部环境，制定明确的流程和系统，并做出基于逻辑的决策。
                            </p>
                            <p v-if="personalityType === 'ISTJ'">
                                在压力情境下，您可能会表现出劣势功能外向直觉(Ne)的负面特征，如过度担忧未来可能出现的问题，或做出非典型的冲动决定。了解这一点可以帮助您在压力下更好地管理自己的反应。
                            </p>
                            
                            <p v-if="personalityType === 'ISFJ'">
                                ISFJ是内向、热心、负责任和细致的人格类型。
                            </p>
                            <p v-if="personalityType === 'ISFJ'">
                                您是一个安静、友好、尽责且有责任感的人。您对承诺非常认真，忠诚度高，履行义务时具备高度的稳定性。您对人和生活中重要的事物都非常关心，努力创造有序和和谐的工作和家庭环境。
                            </p>
                            <p v-if="personalityType === 'ISFJ'">
                                您注重实际，具有优秀的记忆力，记得与重要人物和事件相关的细节。您喜欢帮助他人，经常默默无闻地付出。您重视传统和历史，相信通过亲身经历学习。您通常把他人的需求放在自己之前，是可靠的照顾者和保护者。
                            </p>
                            
                            <p v-if="personalityType === 'INFJ'">
                                INFJ是有远见、有创意、敏感且理想主义的人格类型。
                            </p>
                            <p v-if="personalityType === 'INFJ'">
                                您是一个寻求意义和联系的人，对人类潜能有深刻的理解。您是富有同情心的理想主义者，对周围人有很高的期望，对自己则要求更高。您珍视深刻的真实关系，关心他人的个人成长和发展。
                            </p>
                            <p v-if="personalityType === 'INFJ'">
                                您有很强的直觉，常能洞察事物背后的深层含义。您注重创新和独创性，喜欢复杂的问题和新想法。您对人和情感敏锐，但同时也是一个私密性强、保护自己内心世界的人。您致力于帮助他人，常常为理想和价值观而努力工作。
                            </p>
                            
                            <p v-if="personalityType === 'INTJ'">
                                INTJ是独立、创新、战略性思考者和谋略家。
                            </p>
                            <p v-if="personalityType === 'INTJ'">
                                您拥有原创的思想和强烈的推动力来实现自己的想法和目标。您能够快速洞察事物的模式，培养长期规划的远见，并为之组织相应的流程。您是一个独立性强、怀疑性强的思考者，对自己和他人都有很高的能力和表现要求。
                            </p>
                            <p v-if="personalityType === 'INTJ'">
                                您注重知识和能力，对无能和混乱缺乏容忍度。您渴望不断改进系统和流程，喜欢提出创新的解决方案。您追求逻辑和理性，做决定时依靠思考而非情感。您倾向于保持一定的距离和隐私，只与少数志同道合的人分享内心世界。
                            </p>
                            
                            <p v-if="personalityType === 'ISTP'">
                                ISTP是灵活、冷静、善于分析和实际的人格类型。
                            </p>
                            <p v-if="personalityType === 'ISTP'">
                                您是一个安静的观察者，对事物如何运作充满好奇心，能迅速发现环境中的不一致性。您注重实际解决方案而非理论，喜欢处理具体问题。您自然倾向于冒险和冲击的行为，享受挑战和动手实践的活动。
                            </p>
                            <p v-if="personalityType === 'ISTP'">
                                您以逻辑和效率为重，做决定时依赖客观分析而非个人感受。您重视个人自由和独立思考，不喜欢受规则和框架约束。您通常保持冷静、灵活且适应性强，能在危机中保持镇定。您在需要专注解决问题时能表现出色，但也珍视个人空间和自主权。
                            </p>
                            
                            <p v-if="personalityType === 'ISFP'">
                                ISFP是敏感、友善、谦虚和灵活的人格类型。
                            </p>
                            <p v-if="personalityType === 'ISFP'">
                                您是一个安静、友好、敏感且善良的人，喜欢自己的空间和独立工作的自由。您忠于自己的价值观和重要的人。您喜欢现在和实际的事物，享受当下而不过分担忧未来。您避免争论和冲突，不强加自己的观点或价值观于他人。
                            </p>
                            <p v-if="personalityType === 'ISFP'">
                                您通常是一个低调、谦逊的人，不寻求领导位置，但在重要的个人问题上可以非常坚定。您拥有丰富的美感和艺术感，注重和谐与美，通常有创造性表达的天赋。您做决定基于个人价值观而非逻辑分析，优先考虑人际关系和情感需求。
                            </p>
                            
                            <p v-if="personalityType === 'INFP'">
                                INFP是理想主义者，忠于自己的价值观和追求的人。
                            </p>
                            <p v-if="personalityType === 'INFP'">
                                您是一个安静、反思和通常保持隐私的人。您有着强烈的内在价值观，忠于重要的人或事业。您寻求外部生活与内在价值的和谐，好奇且快速洞察可能性。您在建立联系方面很灵活，除非价值观受到威胁，通常适应能力强且接受力强。
                            </p>
                            <p v-if="personalityType === 'INFP'">
                                您富有同情心和理解力，高度重视真实性和诚实。您对理解他人和促进他人成长有天然的热情，注重创意和可能性。您追求和谐与一致性，常因个人价值观和信念而行动，希望生活具有意义和目的。
                            </p>
                            
                            <p v-if="personalityType === 'INTP'">
                                INTP是独立思考者、逻辑分析家和思辨者。
                            </p>
                            <p v-if="personalityType === 'INTP'">
                                您是一个寻求逻辑解释的人，对理论和抽象事物感兴趣，不太关注社交互动和聚会。您安静、内敛、灵活且适应性强，对特别感兴趣的问题或项目能投入异常专注的注意力。
                            </p>
                            <p v-if="personalityType === 'INTP'">
                                您是一个怀疑性思考者，擅长批判性分析问题和系统。您注重理论框架和概念创新，享受复杂问题的解决。您倾向于独立工作，不太受传统权威和规则的约束。您重视知识和理解，渴望不断拓展思维边界，但可能对情感和人际互动感到挑战。
                            </p>
                            
                            <p v-if="personalityType === 'ESTP'">
                                ESTP是活跃、灵活、果断和实际的人格类型。
                            </p>
                            <p v-if="personalityType === 'ESTP'">
                                您是一个行动导向的问题解决者，享受当下的乐趣，喜欢围绕他人活动。您解决问题时采用现实和务实的方法，注重即时结果。您从不拘泥于规则和程序，喜欢找到灵活的解决方案。
                            </p>
                            <p v-if="personalityType === 'ESTP'">
                                您善于观察和理解人与环境，适应变化迅速，是经验主义者而非理论家。您喜欢活跃和刺激，通常精力充沛且乐观向上。您做决定时注重逻辑和效率，而非个人感受和价值观。您通常直接、坦率，具有冒险精神和即兴行动的能力。
                            </p>
                            
                            <p v-if="personalityType === 'ESFP'">
                                ESFP是外向、友好、随和和充满活力的人格类型。
                            </p>
                            <p v-if="personalityType === 'ESFP'">
                                您是一个乐观、友善和富有社交能力的人，喜欢与他人在一起，享受生活的乐趣。您灵活且自发，很容易适应新环境和人物。您是一个实际的问题解决者，关注眼前的需求和实际结果。
                            </p>
                            <p v-if="personalityType === 'ESFP'">
                                您学习新技能时偏好亲身实践而非阅读或指导。您注重感官体验和当下享受，不太关注长期计划和抽象概念。您通常慷慨、温暖且充满同情心，营造愉快和谐的氛围。您做决定时倾向考虑个人价值观和影响，注重人际关系和情感需求。
                            </p>
                            
                            <p v-if="personalityType === 'ENFP'">
                                ENFP是热情、创新、多才多艺和充满想象力的人格类型。
                            </p>
                            <p v-if="personalityType === 'ENFP'">
                                您是一个热情洋溢、想象力丰富的人，能看到生活中的各种可能性。您快速理解连接，有能力与各种人和环境建立联系。您渴望肯定和欣赏，易于表达欣赏和支持他人。
                            </p>
                            <p v-if="personalityType === 'ENFP'">
                                您具有创新性和创造力，喜欢新奇的想法和开创性的项目。您对人和事物本质敏感，注重人际关系和和谐。您适应性强且灵活，但可能难以遵循严格的规程和例行公事。您通常精力充沛、表达丰富，具有感染他人的能力和热情。
                            </p>
                            
                            <p v-if="personalityType === 'ENTP'">
                                ENTP是机智、善辩、创新和适应能力强的人格类型。
                            </p>
                            <p v-if="personalityType === 'ENTP'">
                                您是敏捷的思想家，喜欢智力挑战，具有很强的创新能力和适应能力。您精力充沛、警觉，善于处理各种问题。您对各种可能性持开放态度，自信且直言不讳，善于概念性理解和战略分析。
                            </p>
                            <p v-if="personalityType === 'ENTP'">
                                您喜欢讨论和辩论，享受知识交流和思想碰撞。您注重创新和改变，喜欢挑战现状和传统观念。您倾向于依靠逻辑和分析做决定，而非个人感受。您通常充满活力且思维敏捷，具有解决复杂问题的天赋，但可能对细节和日常任务感到不耐烦。
                            </p>
                            
                            <p v-if="personalityType === 'ESTJ'">
                                ESTJ是实际、直接、有组织和果断的人格类型。
                            </p>
                            <p v-if="personalityType === 'ESTJ'">
                                您是一个实际、现实且注重事实的人，果断、迅速行动实施决策。您喜欢组织和运行活动，注重结果，优先考虑系统性思考和有序流程。您在实施标准程序和确保标准得到维护方面表现出色。
                            </p>
                            <p v-if="personalityType === 'ESTJ'">
                                您喜欢在明确的规则和指导方针下工作，重视传统和秩序。您做决定时依赖逻辑和客观分析，不太受个人感受影响。您通常直接、坦率，有强烈的责任感和工作道德，注重效率和实际结果，但可能缺乏对他人情感需求的敏感度。
                            </p>
                            
                            <p v-if="personalityType === 'ESFJ'">
                                ESFJ是温暖、有良心、合作和负责任的人格类型。
                            </p>
                            <p v-if="personalityType === 'ESFJ'">
                                您是一个讲求合作的人，重视和谐与良好人际关系，善于理解他人的需求并积极响应。您注重传统、秩序和安全，喜欢有组织性和结构的环境。您尽职尽责，可靠热情，倾向于通过具体行动表达关怀。
                            </p>
                            <p v-if="personalityType === 'ESFJ'">
                                您重视他人，对情感敏感，寻求肯定和欣赏。您做决定时依赖个人价值观和对他人的影响，而非仅仅依靠逻辑。您通常热心且外向，把他人需求置于自己之上，寻求稳定和谐的环境，对变化可能感到不安。您善于组织活动和照顾他人，是社区和团队的重要支持者。
                            </p>
                            
                            <p v-if="personalityType === 'ENFJ'">
                                ENFJ是热情、善于沟通、并具有感召力的人格类型。
                            </p>
                            <p v-if="personalityType === 'ENFJ'">
                                您是一个充满同理心的领导者，敏感地关注他人的情感、需求和动机。您能够找到潜力并帮助他人成长发展，重视真实的人际互动和协作。您对团队士气敏感，乐于承担责任并促进团队和谐。
                            </p>
                            <p v-if="personalityType === 'ENFJ'">
                                您通常善于言谈，能够激励他人并清晰地表达自己的想法。您重视连接和关系，天生的支持者和引导者。您注重整体图景和长期目标，同时也关注人际细节。您做决定时依赖价值观和对他人的影响，而非纯粹的逻辑分析。您通常充满活力、积极且具有说服力，但可能过分承担责任或忽视自身需求。
                            </p>
                            
                            <p v-if="personalityType === 'ENTJ'">
                                ENTJ是果断、坚定、具有领导力和组织能力的人格类型。
                            </p>
                            <p v-if="personalityType === 'ENTJ'">
                                您是一个自然的领导者，能够快速看到不合理或低效的程序和政策。您善于制定和实施全面性的解决方案，并动员他人支持。您更喜欢长期规划和目标设定，关注系统和结构的改进。
                            </p>
                            <p v-if="personalityType === 'ENTJ'">
                                您直接、果断且注重结果，对自己和他人都有很高的期望。您注重策略思考和论证分析，倾向于依靠逻辑而非个人感受做决定。您通常信心十足、直言不讳，具有强大的领导力和管理能力，但可能忽视情感因素和人际关系的微妙之处。您有强烈的目标意识和驱动力，追求效率和卓越。
                            </p>
                            
                            <!-- 添加职业分析模块 -->
                            <div class="mbti-career-section">
                                <h3>职业匹配分析</h3>
                                <div class="mbti-career-content">
                                    <!-- ISTJ职业分析 -->
                                    <div v-if="personalityType === 'ISTJ'">
                                        <p><strong>ISTJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ISTJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>财务与会计</strong> - 财务分析师、注册会计师、审计师、税务专家</li>
                                            <li><strong>法律与合规</strong> - 法务专员、合规官员、法律文书工作者、专利代理人</li>
                                            <li><strong>信息技术</strong> - 系统分析师、数据库管理员、网络安全专家、质量保证工程师</li>
                                            <li><strong>行政管理</strong> - 行政主管、项目经理、物流经理、运营总监</li>
                                            <li><strong>医疗技术</strong> - 医学检验师、药剂师、医疗记录管理员、放射技师</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向感觉(Si)主导功能使您特别适合需要关注细节、遵循既定程序和保持高度准确性的工作。您的外向思考(Te)辅助功能则提供了组织系统和流程的能力，使您在需要逻辑分析和结构化工作环境的职业中表现出色。</p>
                                        
                                        <p>ISTJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>有明确的规则、程序和期望的结构化环境</li>
                                            <li>重视准确性、可靠性和一致性的组织</li>
                                            <li>提供稳定性和可预测性的工作场所</li>
                                            <li>允许独立工作并专注于任务的环境</li>
                                            <li>重视传统、经验和实用解决方案的机构</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您对细节的关注和组织能力的职位</li>
                                            <li>发展适应性和开放性，尤其是在面对变化和新方法时</li>
                                            <li>培养与不同人格类型合作的能力，特别是与直觉型(N)和感知型(P)同事</li>
                                            <li>通过结构化的培训和认证课程继续专业发展</li>
                                            <li>寻求能够提供长期稳定性和明确晋升路径的组织</li>
                                            <li>医疗保健（如：药剂师、医疗技术人员）</li>
                                        </ul>
                                        <p>作为ISTJ类型，您的职业优势在于：严谨细致、责任心强、逻辑思维清晰、执行力强、忠诚可靠。这些特质使您在需要高度精确性和条理性的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ISFJ职业分析 -->
                                    <div v-if="personalityType === 'ISFJ'">
                                        <p><strong>ISFJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ISFJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>医疗护理</strong> - 护士、医疗助理、护理师、社区健康工作者</li>
                                            <li><strong>教育</strong> - 小学教师、特殊教育教师、学校辅导员、图书管理员</li>
                                            <li><strong>社会服务</strong> - 社会工作者、辅导员、个案管理员、长者护理专员</li>
                                            <li><strong>行政支持</strong> - 行政助理、办公室经理、人力资源专员、客户服务经理</li>
                                            <li><strong>医疗技术</strong> - 医疗记录专员、药剂师助理、牙科卫生师、物理治疗助理</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向感觉(Si)主导功能使您特别擅长关注细节、遵循程序和保持稳定性，而外向情感(Fe)辅助功能则赋予您对他人需求的敏感性和提供支持的能力。这种组合使您在需要耐心、同理心和关注细节的照护类工作中表现出色。</p>
                                        
                                        <p>ISFJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>有明确程序和期望的稳定、结构化环境</li>
                                            <li>重视合作、和谐与相互支持的组织</li>
                                            <li>能够直接帮助他人并看到工作成果的职位</li>
                                            <li>提供安全感和可预测性的工作场所</li>
                                            <li>认可个人贡献和忠诚度的机构</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的责任感、关怀能力和对细节的关注的职位</li>
                                            <li>发展在必要时设定界限的能力，避免过度付出导致职业倦怠</li>
                                            <li>培养适应变化的弹性，尤其是在面对新系统或工作方法时</li>
                                            <li>通过结构化的培训和认证课程继续专业发展</li>
                                            <li>寻求能够提供长期稳定性和认可您贡献的组织</li>
                                        </ul>
                                        <p>作为ISFJ类型，您的职业优势在于：细心体贴、责任感强、关注细节、忠诚可靠、有耐心。这些特质使您在需要关怀和支持他人的工作中表现卓越。</p>
                                    </div>
                                    
                                    <!-- INFJ职业分析 -->
                                    <div v-if="personalityType === 'INFJ'">
                                        <p><strong>INFJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合INFJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>心理健康</strong> - 心理咨询师、治疗师、临床心理学家、精神健康顾问</li>
                                            <li><strong>教育与指导</strong> - 教育顾问、职业规划师、大学教授、特殊教育教师</li>
                                            <li><strong>创意写作</strong> - 作家、编辑、内容策略师、剧作家</li>
                                            <li><strong>人力资源发展</strong> - 组织发展顾问、人力资源专员、培训师、职业教练</li>
                                            <li><strong>非营利管理</strong> - 非营利组织总监、项目协调员、社会倡导者、公益活动家</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向直觉(Ni)主导功能使您善于识别模式和洞察深层意义，而外向情感(Fe)辅助功能则提供了深刻理解他人需求和建立和谐关系的能力。这种组合使您在需要深度理解人类动机和促进积极变革的工作中表现出色。</p>
                                        
                                        <p>INFJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>有意义且与价值观一致的工作环境</li>
                                            <li>允许创造性思考和长期规划的职位</li>
                                            <li>重视深度人际互动而非表面社交的场所</li>
                                            <li>提供一定独立性和安静工作空间的组织</li>
                                            <li>促进个人成长和社会进步的机构</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够满足您对意义和目标的需求的职位</li>
                                            <li>发展实际的组织和时间管理技能，平衡您的理想主义</li>
                                            <li>学习设定健康的界限，避免情感耗竭</li>
                                            <li>培养表达您独特见解和创意的信心</li>
                                            <li>在工作环境中为自己创造恢复能量的空间和时间</li>
                                        </ul>
                                        <p>作为INFJ类型，您的职业优势在于：深刻的洞察力、强烈的同理心、创造性思维、协调与调解能力、坚定的价值观导向。这些特质使您在需要深度理解和积极影响他人生活的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- INFP职业分析 -->
                                    <div v-if="personalityType === 'INFP'">
                                        <p><strong>INFP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合INFP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>创意写作</strong> - 作家、诗人、编剧、内容创作者</li>
                                            <li><strong>心理健康</strong> - 心理咨询师、治疗师、社会工作者</li>
                                            <li><strong>艺术与设计</strong> - 平面设计师、插画师、艺术家、多媒体设计师</li>
                                            <li><strong>教育与培训</strong> - 教育顾问、特殊教育教师、语言教师</li>
                                            <li><strong>人道主义工作</strong> - 非营利组织工作者、环保活动家、社区服务协调员</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向情感(Fi)主导功能使您特别适合需要深度理解人类情感、价值观和个人意义的工作。您的外向直觉(Ne)辅助功能则提供了创造性思维和看到可能性的能力，使您在需要创新和个人表达的职业中表现出色。</p>
                                        
                                        <p>INFP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>允许个人表达和创造性的环境</li>
                                            <li>重视真实性、同理心和个人价值观的组织</li>
                                            <li>提供灵活性和自主性的工作场所</li>
                                            <li>允许您帮助他人并产生积极影响的职位</li>
                                            <li>支持个人成长和意义探索的机构</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的创造力、同理心和价值观的职位</li>
                                            <li>发展实际技能和组织能力，尤其是在处理日常任务和截止日期时</li>
                                            <li>培养与不同人格类型合作的能力，特别是与思考型(T)和判断型(J)同事</li>
                                            <li>通过创意写作、艺术表达或心理学相关的培训继续专业发展</li>
                                            <li>寻求能够提供意义感和价值一致性的组织</li>
                                        </ul>
                                        <p>作为INFP类型，您的职业优势在于：创造力强、富有同理心、价值观驱动、独立思考、善于倾听。这些特质使您在需要深度理解人类需求和创造性表达的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- INTJ职业分析 -->
                                    <div v-if="personalityType === 'INTJ'">
                                        <p><strong>INTJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合INTJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>战略规划</strong> - 战略顾问、商业分析师、管理顾问、企业战略家</li>
                                            <li><strong>科学研究</strong> - 科学家、研究员、数据科学家、理论物理学家</li>
                                            <li><strong>信息技术</strong> - 系统架构师、软件工程师、IT咨询师、网络安全专家</li>
                                            <li><strong>金融投资</strong> - 投资分析师、金融策略师、风险管理专家、投资银行家</li>
                                            <li><strong>专业领域</strong> - 律师、法官、医生、大学教授、工程师</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向直觉(Ni)主导功能使您善于识别系统性模式和发展长期愿景，而外向思考(Te)辅助功能则提供了实施战略并组织资源的能力。这种组合使您在需要概念性思维和系统分析的复杂工作中表现出色。</p>
                                        
                                        <p>INTJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供智力挑战和复杂问题的环境</li>
                                            <li>允许独立工作和自主决策的职位</li>
                                            <li>重视能力和成果而非社交政治的组织</li>
                                            <li>提供持续学习和专业发展机会的机构</li>
                                            <li>欣赏创新思维和系统改进的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的战略思维和概念化能力的职位</li>
                                            <li>发展人际沟通技巧，尤其是表达复杂想法的能力</li>
                                            <li>培养与不同人格类型合作的耐心，特别是与感觉型(S)和情感型(F)同事</li>
                                            <li>学习接受必要的社交互动和团队合作过程</li>
                                            <li>创建长期职业发展计划，包括持续学习和专业认证</li>
                                        </ul>
                                        <p>作为INTJ类型，您的职业优势在于：战略性思维、独立工作能力、分析技能、创新性解决问题的能力、长期规划视野。这些特质使您在需要概念化和实施复杂系统的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ISTP职业分析 -->
                                    <div v-if="personalityType === 'ISTP'">
                                        <p><strong>ISTP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ISTP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>技术工程</strong> - 机械工程师、电气工程师、软件开发工程师、系统分析师</li>
                                            <li><strong>应急服务</strong> - 警察、消防员、急救技术员、军事人员、飞行员</li>
                                            <li><strong>技术维修</strong> - 计算机技术员、机械师、电子设备维修师、IT故障排除专家</li>
                                            <li><strong>手工艺术</strong> - 建筑师、木工、精密技师、工艺品制作者</li>
                                            <li><strong>技术分析</strong> - 法医调查员、数据分析师、质量控制专员、安全顾问</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向思考(Ti)主导功能使您善于分析系统和解决逻辑问题，而外向感觉(Se)辅助功能则提供了对当前环境的敏锐观察和快速反应能力。这种组合使您在需要实际技能和临场应变的工作中表现出色。</p>
                                        
                                        <p>ISTP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供多样化任务和实际挑战的环境</li>
                                            <li>允许独立工作和动手操作的职位</li>
                                            <li>重视解决问题的能力和实际结果的组织</li>
                                            <li>提供灵活性和最少官僚程序的工作场所</li>
                                            <li>欣赏效率和实用解决方案的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的问题解决技能和动手能力的职位</li>
                                            <li>发展项目管理和长期规划能力</li>
                                            <li>培养有效沟通技巧，特别是在解释技术概念给非技术人员时</li>
                                            <li>学习在需要时遵循结构和程序的耐心</li>
                                            <li>不断更新技术知识和实践技能以保持市场竞争力</li>
                                        </ul>
                                        <p>作为ISTP类型，您的职业优势在于：实用的问题解决能力、适应性强、冷静应对危机、技术分析能力、高效精准。这些特质使您在需要实际技能和逻辑思维的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ISFP职业分析 -->
                                    <div v-if="personalityType === 'ISFP'">
                                        <p><strong>ISFP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ISFP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>艺术与设计</strong> - 平面设计师、时装设计师、室内设计师、摄影师、多媒体艺术家</li>
                                            <li><strong>健康与美容</strong> - 按摩治疗师、美容师、营养师、个人健康教练、芳香疗法师</li>
                                            <li><strong>烹饪艺术</strong> - 厨师、糕点师、烘焙师、餐饮顾问、美食博主</li>
                                            <li><strong>自然与环境</strong> - 园艺师、景观设计师、环保工作者、动物护理师</li>
                                            <li><strong>辅助服务</strong> - 职业治疗师、小学教师、儿童发展专家、休闲活动协调员</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向情感(Fi)主导功能使您拥有强烈的个人价值观和审美意识，而外向感觉(Se)辅助功能则提供了对感官体验的敏感性和艺术表达能力。这种组合使您在需要创意表达和个人接触的工作中表现出色。</p>
                                        
                                        <p>ISFP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供个人创意表达和自主性的环境</li>
                                            <li>允许实际动手和有形成果的职位</li>
                                            <li>重视真实性和个人价值观的组织</li>
                                            <li>提供轻松非竞争性氛围的工作场所</li>
                                            <li>欣赏个人风格和美感的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够融合您的创意天赋和实际技能的职位</li>
                                            <li>发展商业知识和自我推广能力，特别是在创意领域</li>
                                            <li>培养表达自己想法和需求的沟通技巧</li>
                                            <li>学习设定明确的职业目标并制定实现步骤</li>
                                            <li>探索能够结合您的价值观和创意的自由职业或创业机会</li>
                                        </ul>
                                        <p>作为ISFP类型，您的职业优势在于：创意天赋、美学敏感度、真诚与同理心、实用解决问题的能力、适应当下的灵活性。这些特质使您在需要个人风格和审美表达的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- INTP职业分析 -->
                                    <div v-if="personalityType === 'INTP'">
                                        <p><strong>INTP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合INTP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>计算机科学</strong> - 软件开发工程师、系统架构师、数据科学家、AI研究员</li>
                                            <li><strong>科学研究</strong> - 物理学家、数学家、生物信息学家、神经科学家</li>
                                            <li><strong>学术与理论</strong> - 大学教授、哲学家、理论研究员、科学作家</li>
                                            <li><strong>技术分析</strong> - 经济学家、市场分析师、法律分析师、系统分析师</li>
                                            <li><strong>创新设计</strong> - 产品设计师、发明家、游戏设计师、创新顾问</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的内向思考(Ti)主导功能使您擅长理论分析和逻辑系统构建，而外向直觉(Ne)辅助功能则提供了识别模式和探索新可能性的能力。这种组合使您在需要概念创新和深度思考的工作中表现出色。</p>
                                        
                                        <p>INTP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供智力挑战和理论探索的环境</li>
                                            <li>允许独立工作和自主决策的职位</li>
                                            <li>重视创新想法和概念思维的组织</li>
                                            <li>提供最少的官僚限制和微管理的工作场所</li>
                                            <li>欣赏逻辑思维和系统分析的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的分析思维和创新能力的职位</li>
                                            <li>发展项目管理和执行能力，将想法转化为实际成果</li>
                                            <li>培养有效沟通技巧，特别是在解释复杂概念时</li>
                                            <li>学习在团队环境中合作并遵守必要的截止日期</li>
                                            <li>探索能够结合您的理论兴趣和实际应用的专业领域</li>
                                        </ul>
                                        <p>作为INTP类型，您的职业优势在于：理论分析能力、系统思维、问题解决创新、概念设计能力、独立研究能力。这些特质使您在需要逻辑思考和创新解决方案的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ESTP职业分析 -->
                                    <div v-if="personalityType === 'ESTP'">
                                        <p><strong>ESTP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ESTP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>销售与谈判</strong> - 销售代表、商务谈判专家、房地产经纪人、保险代理人</li>
                                            <li><strong>商业与创业</strong> - 企业家、股票交易员、营销专员、商业顾问</li>
                                            <li><strong>执法与应急</strong> - 警察、消防员、急救医疗技术员、安全顾问</li>
                                            <li><strong>运动与娱乐</strong> - 职业运动员、体育教练、娱乐表演者、活动策划师</li>
                                            <li><strong>技术操作</strong> - 飞行员、机械师、工程技术员、建筑施工管理</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向感觉(Se)主导功能使您特别敏锐地觉察当下环境并能够快速反应，而内向思考(Ti)辅助功能则提供了解决问题和分析情境的能力。这种组合使您在需要实时应变和灵活处理情况的工作中表现出色。</p>
                                        
                                        <p>ESTP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供多样化体验和充满活力的环境</li>
                                            <li>允许行动自由和实际操作的职位</li>
                                            <li>重视解决实际问题和立即结果的组织</li>
                                            <li>提供竞争性挑战和表现机会的工作场所</li>
                                            <li>欣赏冒险精神和灵活应变的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的行动导向和适应能力的职位</li>
                                            <li>发展长期规划和项目管理技能</li>
                                            <li>培养耐心和细节关注能力，特别是处理重复性任务时</li>
                                            <li>学习在冲动行动前考虑长期后果</li>
                                            <li>探索能够结合您的实用技能和人际魅力的职业领域</li>
                                        </ul>
                                        <p>作为ESTP类型，您的职业优势在于：实用主义、适应力强、解决问题能力、冒险精神、说服力和谈判技巧。这些特质使您在需要灵活性和快速反应的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ESFP职业分析 -->
                                    <div v-if="personalityType === 'ESFP'">
                                        <p><strong>ESFP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ESFP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>艺术表演</strong> - 演员、舞者、音乐家、喜剧演员、主持人</li>
                                            <li><strong>销售服务</strong> - 销售代表、客户服务专员、零售顾问、旅游顾问</li>
                                            <li><strong>公共关系</strong> - 公关专员、活动策划师、社交媒体经理、品牌大使</li>
                                            <li><strong>健康服务</strong> - 儿科护士、初级保健人员、健身教练、营养顾问</li>
                                            <li><strong>教育服务</strong> - 小学教师、幼儿教师、特殊教育工作者、休闲活动指导员</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向感觉(Se)主导功能使您对环境高度敏感并乐于体验当下，而内向情感(Fi)辅助功能则提供了对个人价值的坚定信念和对他人情感的理解。这种组合使您在需要人际互动和创意表达的工作中表现出色。</p>
                                        
                                        <p>ESFP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供社交互动和活力氛围的环境</li>
                                            <li>允许创意表达和灵活工作方式的职位</li>
                                            <li>重视实际帮助他人和即时回馈的组织</li>
                                            <li>提供多样化体验和乐趣的工作场所</li>
                                            <li>欣赏自发性和乐观态度的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够结合您的社交能力和实用技能的职位</li>
                                            <li>发展组织能力和长期规划技巧</li>
                                            <li>培养注意细节和遵循程序的耐心</li>
                                            <li>学习在快乐氛围之外处理复杂或困难的情况</li>
                                            <li>利用您的魅力和表现力推广自己的职业价值</li>
                                        </ul>
                                        <p>作为ESFP类型，您的职业优势在于：热情活力、沟通能力强、社交魅力、实用创意、适应当下环境的能力。这些特质使您在需要人际关系和即兴应变的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ENFP职业分析 -->
                                    <div v-if="personalityType === 'ENFP'">
                                        <p><strong>ENFP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ENFP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>创意策划</strong> - 创意总监、广告策划师、活动策划师、品牌顾问</li>
                                            <li><strong>辅导咨询</strong> - 职业顾问、生活教练、人际关系治疗师、教育顾问</li>
                                            <li><strong>企业发展</strong> - 企业家、创新顾问、组织发展专家、营销总监</li>
                                            <li><strong>媒体传播</strong> - 记者、主持人、社交媒体策略师、公共关系专员</li>
                                            <li><strong>教育培训</strong> - 培训师、创意教育工作者、语言教师、演讲指导</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向直觉(Ne)主导功能使您善于识别可能性和创新连接，而内向情感(Fi)辅助功能则提供了强烈的价值观和与他人共情的能力。这种组合使您在需要创意思维和人际影响的工作中表现出色。</p>
                                        
                                        <p>ENFP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供创新思考和多元可能性的环境</li>
                                            <li>允许自我表达和灵活工作方式的职位</li>
                                            <li>重视创意贡献和独特视角的组织</li>
                                            <li>提供多样化任务和新挑战的工作场所</li>
                                            <li>欣赏热情和真诚互动的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够激发您的创造力和人际技能的职位</li>
                                            <li>发展项目管理和执行力，将创意转化为实际成果</li>
                                            <li>培养专注力和持久性，尤其是在面对长期项目时</li>
                                            <li>学习设定明确的目标和界限，避免过度承诺</li>
                                            <li>探索能够结合您的激情和价值观的创新职业路径</li>
                                        </ul>
                                        <p>作为ENFP类型，您的职业优势在于：创造性思维、热情感染力、适应变化能力、人际理解力、激发他人潜能的能力。这些特质使您在需要创新和人际联系的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ENTP职业分析 -->
                                    <div v-if="personalityType === 'ENTP'">
                                        <p><strong>ENTP的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ENTP类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>创业与创新</strong> - 企业家、创业投资家、创新顾问、商业战略家</li>
                                            <li><strong>法律与辩论</strong> - 律师、谈判专家、政治顾问、辩论教练</li>
                                            <li><strong>市场营销</strong> - 营销总监、品牌策略师、市场分析师、广告创意总监</li>
                                            <li><strong>技术创新</strong> - 产品开发者、系统设计师、技术顾问、创新研究员</li>
                                            <li><strong>媒体与传播</strong> - 记者、编辑、脱口秀主持人、内容创作者</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向直觉(Ne)主导功能使您善于发现新可能性和创新连接，而内向思考(Ti)辅助功能则提供了分析框架和逻辑推理能力。这种组合使您在需要创新思维和解决复杂问题的工作中表现出色。</p>
                                        
                                        <p>ENTP类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供智力挑战和创新自由的环境</li>
                                            <li>允许辩论和质疑常规的职位</li>
                                            <li>重视创意解决方案和战略思维的组织</li>
                                            <li>提供多样化项目和持续学习的工作场所</li>
                                            <li>欣赏灵活性和适应性的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够激发您的创新思维和解决问题能力的职位</li>
                                            <li>发展项目执行和完成能力，避免仅停留在创意阶段</li>
                                            <li>培养耐心和坚持性，特别是处理细节和例行工作时</li>
                                            <li>学习在辩论中考虑他人感受，平衡直接与外交</li>
                                            <li>探索能够持续提供新挑战和学习机会的职业道路</li>
                                        </ul>
                                        <p>作为ENTP类型，您的职业优势在于：创新思维、辩论技巧、适应能力强、解决问题的灵活性、激发变革的能力。这些特质使您在需要创新视角和战略思考的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ESTJ职业分析 -->
                                    <div v-if="personalityType === 'ESTJ'">
                                        <p><strong>ESTJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ESTJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>管理与领导</strong> - 企业高管、项目经理、运营总监、行政主管</li>
                                            <li><strong>财务管理</strong> - 财务总监、审计师、税务专家、预算分析师</li>
                                            <li><strong>法律与执法</strong> - 法官、律师、警官、合规官员</li>
                                            <li><strong>医疗管理</strong> - 医院管理者、医疗行政人员、健康服务经理</li>
                                            <li><strong>军事与政府</strong> - 军官、政府官员、公共管理人员、政策顾问</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向思考(Te)主导功能使您善于组织、计划和实施系统，而内向感觉(Si)辅助功能则提供了关注细节和遵循既定程序的能力。这种组合使您在需要组织管理和高效执行的工作中表现出色。</p>
                                        
                                        <p>ESTJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供明确结构和既定程序的环境</li>
                                            <li>允许系统性组织和管理的职位</li>
                                            <li>重视传统、稳定性和实际结果的组织</li>
                                            <li>提供明确目标和责任的工作场所</li>
                                            <li>欣赏效率和坚定领导的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的组织能力和决策技能的职位</li>
                                            <li>发展灵活性和开放性，尤其是面对变革和新方法时</li>
                                            <li>培养倾听技能和情感敏感度，特别是管理不同类型的团队成员</li>
                                            <li>学习在必要时接受模糊性和不确定性</li>
                                            <li>探索能够结合您的管理才能和核心价值观的领导角色</li>
                                        </ul>
                                        <p>作为ESTJ类型，您的职业优势在于：组织能力强、决策果断、执行力高、责任感强、注重效率。这些特质使您在需要管理系统和确保结果的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ESFJ职业分析 -->
                                    <div v-if="personalityType === 'ESFJ'">
                                        <p><strong>ESFJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ESFJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>医疗护理</strong> - 护士、医疗社工、健康教育者、老年护理专家</li>
                                            <li><strong>教育工作</strong> - 小学教师、辅导员、学校行政人员、特殊教育教师</li>
                                            <li><strong>人力资源</strong> - 人力资源经理、员工关系专员、培训协调员、福利管理员</li>
                                            <li><strong>客户服务</strong> - 客户服务经理、酒店管理者、零售经理、活动协调员</li>
                                            <li><strong>社区服务</strong> - 社区服务总监、非营利组织协调员、志愿者管理者</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向情感(Fe)主导功能使您特别善于理解和关心他人需求，而内向感觉(Si)辅助功能则提供了关注细节和维护传统的能力。这种组合使您在需要人际互动和支持性服务的工作中表现出色。</p>
                                        
                                        <p>ESFJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供和谐人际互动和团队合作的环境</li>
                                            <li>允许直接帮助他人并获得积极反馈的职位</li>
                                            <li>重视传统、结构和明确程序的组织</li>
                                            <li>提供稳定性和可预测性的工作场所</li>
                                            <li>欣赏贡献和合作精神的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的人际关怀能力和组织技能的职位</li>
                                            <li>发展接受变化和处理冲突的能力</li>
                                            <li>培养在必要时做出困难决定的信心，即使可能不受欢迎</li>
                                            <li>学习设定健康的个人界限，避免过度付出</li>
                                            <li>探索能够结合您的社会技能和实际组织能力的职业路径</li>
                                        </ul>
                                        <p>作为ESFJ类型，您的职业优势在于：人际关系技能、合作精神、组织能力、实用性、关注细节。这些特质使您在需要协调、支持和维护社会结构的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ENFJ职业分析 -->
                                    <div v-if="personalityType === 'ENFJ'">
                                        <p><strong>ENFJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ENFJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>教育指导</strong> - 教师、校长、教育顾问、教育政策制定者</li>
                                            <li><strong>心理咨询</strong> - 心理治疗师、婚姻家庭咨询师、职业顾问、生活教练</li>
                                            <li><strong>人力资源</strong> - 人力资源总监、组织发展顾问、培训经理、人才招聘总监</li>
                                            <li><strong>公共关系</strong> - 公关总监、媒体发言人、市场营销经理、品牌大使</li>
                                            <li><strong>非营利管理</strong> - 非营利组织总监、社区外展协调员、慈善机构领导者</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向情感(Fe)主导功能使您特别擅长理解和促进人际和谐，而内向直觉(Ni)辅助功能则提供了洞察未来可能性和识别模式的能力。这种组合使您在需要引导他人和促进积极变革的工作中表现出色。</p>
                                        
                                        <p>ENFJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供影响他人发展和成长的机会</li>
                                            <li>允许创造性表达和团队协作的职位</li>
                                            <li>重视积极人际关系和共同价值观的组织</li>
                                            <li>提供意义感和社会贡献的工作场所</li>
                                            <li>欣赏激励领导和持续成长的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的人际影响力和洞察能力的职位</li>
                                            <li>发展客观分析和设定界限的能力</li>
                                            <li>培养在需要做出艰难决定时的坚定立场</li>
                                            <li>学习在关注他人需求的同时也照顾自己</li>
                                            <li>探索能够结合您的教导天赋和组织能力的领导角色</li>
                                        </ul>
                                        <p>作为ENFJ类型，您的职业优势在于：人际影响力、沟通能力强、领导才能、同理心丰富、激励能力。这些特质使您在需要协调人群和推动共同目标的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- ENTJ职业分析 -->
                                    <div v-if="personalityType === 'ENTJ'">
                                        <p><strong>ENTJ的职业适配性分析：</strong></p>
                                        <p>基于您的认知功能偏好和人格特质，以下是适合ENTJ类型的职业领域及其匹配原因：</p>
                                        
                                        <h4>高度匹配的职业领域</h4>
                                        <ul>
                                            <li><strong>企业领导</strong> - 首席执行官、企业战略家、高级管理人员、董事会成员</li>
                                            <li><strong>管理咨询</strong> - 战略咨询顾问、管理顾问、组织变革专家、业务分析师</li>
                                            <li><strong>创业与投资</strong> - 企业家、创业投资家、并购专家、商业开发总监</li>
                                            <li><strong>法律实践</strong> - 企业律师、法务总监、法官、知识产权专家</li>
                                            <li><strong>技术管理</strong> - 技术总监、项目管理总监、产品经理、研发主管</li>
                                        </ul>
                                        
                                        <h4>职业匹配原因</h4>
                                        <p>您的外向思考(Te)主导功能使您特别擅长组织系统和做出果断决策，而内向直觉(Ni)辅助功能则提供了长期战略思考和预见未来发展的能力。这种组合使您在需要领导力和战略规划的工作中表现出色。</p>
                                        
                                        <p>ENTJ类型在以下工作环境中通常表现最佳：</p>
                                        <ul>
                                            <li>提供领导机会和决策权限的环境</li>
                                            <li>允许实施战略愿景和系统改进的职位</li>
                                            <li>重视效率、结果和持续改进的组织</li>
                                            <li>提供复杂挑战和高度责任的工作场所</li>
                                            <li>欣赏直接沟通和绩效导向的企业文化</li>
                                        </ul>
                                        
                                        <h4>职业发展建议</h4>
                                        <p>为了在职业生涯中充分发挥您的潜力，考虑以下建议：</p>
                                        <ul>
                                            <li>寻找能够利用您的战略思维和领导能力的职位</li>
                                            <li>发展情商和对他人需求的敏感度</li>
                                            <li>培养耐心和倾听技巧，特别是与不同人格类型的人共事时</li>
                                            <li>学习认可他人贡献并给予积极反馈</li>
                                            <li>探索能够结合您的组织才能和远见卓识的领导角色</li>
                                        </ul>
                                        <p>作为ENTJ类型，您的职业优势在于：战略规划能力、决策果断、领导力强、解决问题能力、组织系统能力。这些特质使您在需要高效管理和战略方向的工作中表现出色。</p>
                                    </div>
                                    
                                    <!-- 均分意义 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 通用内容：均分意义 -->
                <div class="analysis-item score-meaning">
                    <div class="analysis-title">均分意义</div>
                    <div class="analysis-text">
                        <ul>
                            <li><span class="score-range">小于1.5分</span>：提示心理健康，正常范围</li>
                            <li><span class="score-range">1.5-2.5分</span>：提示轻度心理健康问题</li>
                            <li><span class="score-range">2.5-3.5分</span>：提示中度心理健康问题</li>
                            <li><span class="score-range">3.5-4.5分</span>：提示偏重心理健康问题</li>
                            <li><span class="score-range">大于4.5分</span>：提示严重心理健康问题</li>
                        </ul>
                    </div>
                </div>
                
                <!-- 各维度详细分析 -->
                <h3 class="section-title" v-if="testType !== 'bsq'&& testType !== 'mbti'" style="font-size: 1.4rem; margin-top: 2rem; margin-bottom: 1rem;">各维度详细分析</h3>
                <div v-for="(score, dimension) in results" :key="dimension" class="analysis-item">
                    <div class="analysis-title">{{dimension}}因子分析</div>
                    <div class="analysis-text">
                        <p>原始分：{{Math.round(getRawScore(dimension))}}</p>
                        <p>均分：{{score.toFixed(2)}}</p>
                        <div class="score-scale">
                            <!-- SCL-90量表的刻度 -->
                            <div class="scale-bar" v-if="testType === 'scl90'">
                                <div class="scale-segment" :class="{ active: score < 1.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">正常</span>
                                        <span class="level-short">正</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 1.5 && score < 2.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">轻度</span>
                                        <span class="level-short">轻</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 2.5 && score < 3.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">中度</span>
                                        <span class="level-short">中</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 3.5 && score < 4.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">偏重</span>
                                        <span class="level-short">偏</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 4.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">严重</span>
                                        <span class="level-short">重</span>
                                    </span>
                                </div>
                            </div>
                            
                            <!-- SDS量表的刻度 -->
                            <div class="scale-bar" v-if="testType === 'sds'">
                                <div class="scale-segment" :class="{ active: getSdsLevelText(score) === '正常' }">
                                    <span class="segment-label">
                                        <span class="level-full">正常</span>
                                        <span class="level-short">正</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: getSdsLevelText(score) === '轻度' }">
                                    <span class="segment-label">
                                        <span class="level-full">轻度</span>
                                        <span class="level-short">轻</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: getSdsLevelText(score) === '中度' }">
                                    <span class="segment-label">
                                        <span class="level-full">中度</span>
                                        <span class="level-short">中</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: getSdsLevelText(score) === '偏重' }">
                                    <span class="segment-label">
                                        <span class="level-full">偏重</span>
                                        <span class="level-short">偏</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: getSdsLevelText(score) === '严重' }">
                                    <span class="segment-label">
                                        <span class="level-full">严重</span>
                                        <span class="level-short">重</span>
                                    </span>
                                </div>
                            </div>
                            
                            <!-- SAS量表的刻度 -->
                            <div class="scale-bar" v-if="testType === 'sas'">
                                <div class="scale-segment" :class="{ active: score < 1.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">正常</span>
                                        <span class="level-short">正</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 1.5 && score < 2.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">轻度</span>
                                        <span class="level-short">轻</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 2.5 && score < 3.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">中度</span>
                                        <span class="level-short">中</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 3.5 && score < 4.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">偏重</span>
                                        <span class="level-short">偏</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 4.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">严重</span>
                                        <span class="level-short">重</span>
                                    </span>
                                </div>
                            </div>
                            
                            <!-- BSQ量表的刻度 -->
                            <div class="scale-bar" v-if="testType === 'bsq'">
                                <div class="scale-segment" :class="{ active: score < 1.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">正常</span>
                                        <span class="level-short">正</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 1.5 && score < 2.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">轻度</span>
                                        <span class="level-short">轻</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 2.5 && score < 3.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">中度</span>
                                        <span class="level-short">中</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 3.5 && score < 4.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">偏重</span>
                                        <span class="level-short">偏</span>
                                    </span>
                                </div>
                                <div class="scale-segment" :class="{ active: score >= 4.5 }">
                                    <span class="segment-label">
                                        <span class="level-full">严重</span>
                                        <span class="level-short">重</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <!-- 将分析内容分成分析和建议两部分 -->
                        <div v-html="getFormattedAnalysis(dimension, score)"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 引入所有测试数据 -->
    <script src="static/js/scl90.js"></script>
    <script src="static/js/sds.js"></script>
    <script src="static/js/sas.js"></script>
    <script src="static/js/bsq.js"></script>
    <script src="static/js/mbti.js"></script>
    <script src="static/js/mbti-processor.js"></script>
    <script src="static/js/mbti-career-analysis.js"></script>
    <script src="static/js/auth.js"></script>
    <script src="static/js/wx-config.js"></script>
    <script src="static/js/weixin-redirect.js"></script>
    <script>
        const { createApp } = Vue;
        const app = createApp({
            mounted() {
                // 检查是否是从历史记录查看报告
                const urlParams = new URLSearchParams(window.location.search);
                const fromHistory = urlParams.get('from') === 'history';
                
                // 只有当不是从历史记录查看时，才检查授权状态
                if (!fromHistory && !window.authSystem.isAuthorized()) {
                    // 未授权且不是查看历史报告，重定向到首页
                    window.location.href = 'index.html';
                    return;
                }
            },
            data() {
                return {
                    testType: '',
                    testTitle: '',
                    testData: null,
                    answers: {},
                    results: {},
                    totalScore: 0,
                    averageScore: 0,
                    standardScore: 0,
                    positiveItems: 0,
                    positiveAverageScore: 0,
                    manicScore: 0,
                    depressiveScore: 0,
                    personalityType: '',
                    mbtiDimensions: {
                        'E-I': [5, 5],
                        'S-N': [5, 5],
                        'T-F': [5, 5],
                        'J-P': [5, 5]
                    }
                };
            },
            created() {
                try {
                    console.log('Report page created');
                    
                    // 获取URL参数
                const urlParams = new URLSearchParams(window.location.search);
                    
                    // 检查URL参数是否包含test_type，如果没有，则检查testType
                    let testType = urlParams.get('test_type');
                    if (!testType) {
                        testType = urlParams.get('testType');
                        console.log('从旧版参数获取测试类型:', testType);
                    }
                    
                    // 加载测试类型，默认为scl90
                    this.testType = testType || 'scl90';
                    console.log('测试类型设置为:', this.testType);
                    
                    // 根据测试类型加载不同的数据
                this.loadTestData();
                
                    // 处理answers参数
                    const answersParam = urlParams.get('answers');
                    if (answersParam) {
                        try {
                            this.answers = JSON.parse(decodeURIComponent(answersParam));
                        } catch (e) {
                            console.error('解析answers参数失败', e);
                            this.answers = {};
                        }
                    }
                    
                    // 使用增强版的方法加载分数数据
                    this.loadScoresFromURL();
                    
                                            // 处理MBTI特定参数
                    if (this.testType === 'mbti') {
                        const personalityTypeParam = urlParams.get('personalityType');
                        this.personalityType = personalityTypeParam || 'ISTJ';
                        
                        console.log('MBTI报告页面初始化人格类型:', this.personalityType);
                        
                        // 确保MBTI数据已经初始化
                        if (!this.mbtiDimensions) {
                            this.mbtiDimensions = {
                                'E-I': [3, 7],
                                'S-N': [6, 4],
                                'T-F': [7, 3],
                                'J-P': [8, 2]
                            };
                        }
                        
                        // 尝试从URL获取MBTI维度数据
                        try {
                            const mbtiDimensionsParam = urlParams.get('mbtiDimensions');
                            if (mbtiDimensionsParam) {
                                const dimensionsData = JSON.parse(decodeURIComponent(mbtiDimensionsParam));
                                
                                // 检查数据格式，如果是对象格式需要转换
                                if (dimensionsData['E-I'] && typeof dimensionsData['E-I'] === 'object' && 'e' in dimensionsData['E-I']) {
                                    // 转换为数组格式
                                    this.mbtiDimensions = {
                                        'E-I': [dimensionsData['E-I'].e, dimensionsData['E-I'].i],
                                        'S-N': [dimensionsData['S-N'].s, dimensionsData['S-N'].n],
                                        'T-F': [dimensionsData['T-F'].t, dimensionsData['T-F'].f],
                                        'J-P': [dimensionsData['J-P'].j, dimensionsData['J-P'].p]
                                    };
                                    console.log('已转换MBTI维度数据格式:', this.mbtiDimensions);
                                } else {
                                    // 已经是期望的格式
                                    this.mbtiDimensions = dimensionsData;
                                    console.log('已加载MBTI维度数据:', this.mbtiDimensions);
                                }
                            }
                        } catch (e) {
                            console.error('解析mbtiDimensions参数失败', e);
                            // 保持默认值
                        }
                    }
                    
                    // 处理BSQ特定参数
                    if (this.testType === 'bsq') {
    // 优先从URL参数获取分数
    let manic = parseFloat(urlParams.get('manicScore'));
    let depressive = parseFloat(urlParams.get('depressiveScore'));
    // 如果URL参数没有，则从localStorage获取
    if (isNaN(manic)) {
        // 从localStorage读取躁狂分数
        manic = parseFloat(localStorage.getItem('bsq_manicScore'));
    }
    if (isNaN(depressive)) {
        // 从localStorage读取抑郁分数
        depressive = parseFloat(localStorage.getItem('bsq_depressiveScore'));
    }
    // 如果都没有，设置为0
    this.manicScore = isNaN(manic) ? 0 : manic;
    this.depressiveScore = isNaN(depressive) ? 0 : depressive;
    // 中文注释：
    // 1. 先尝试从URL参数获取分数，便于兼容历史跳转方式
    // 2. 如果URL没有，则从localStorage读取用户答题时保存的分数
    // 3. 如果都没有，默认分数为0，防止页面报错
}
                    
                    // 确保结果数据不为空
                    if (Object.keys(this.results).length === 0) {
                        this.computeResults();
                    }
                    
                    // 从URL参数获取是否为历史记录查看模式
                    const isHistoryView = urlParams.get('from') === 'history';
                    
                    // 处理MBTI历史记录查看的情况，确保personalityType正确显示
                    if (isHistoryView && this.testType === 'mbti') {
                        // 尝试从URL参数中获取MBTI人格类型
                        const personalityTypeFromURL = urlParams.get('personalityType');
                        if (personalityTypeFromURL) {
                            console.log('从历史记录URL获取MBTI人格类型:', personalityTypeFromURL);
                            this.personalityType = personalityTypeFromURL;
                            
                            // 尝试获取维度数据
                            try {
                                const mbtiDimensionsParam = urlParams.get('mbtiDimensions');
                                if (mbtiDimensionsParam) {
                                    this.mbtiDimensions = JSON.parse(decodeURIComponent(mbtiDimensionsParam));
                                }
                            } catch (e) {
                                console.error('解析历史记录中的mbtiDimensions参数失败', e);
                            }
                        }
                    }
                    
                    // 只有在非历史记录查看模式下才保存测试记录
                    if (!isHistoryView) {
                        this.saveTestRecord();
                    }
                    
                    // 确保显示数据合理，不出现0或NaN
                    this.validateScores();
                } catch (error) {
                    console.error('创建报告页面时出错', error);
                    // 出错时设置默认值
                    this.setDefaultValues();
                }
            },
            methods: {
                // 加载测试数据
                loadTestData() {
                    try {
                    switch(this.testType) {
                        case 'scl90':
                            this.testData = scl90Data;
                            this.testTitle = 'SCL-90 症状自评量表报告';
                            break;
                        case 'sds':
                            this.testData = sdsData;
                            this.testTitle = 'SDS 抑郁自评量表报告';
                            break;
                        case 'sas':
                            this.testData = sasData;
                            this.testTitle = 'SAS 焦虑自评量表报告';
                            break;
                        case 'bsq':
                            this.testData = bsqData;
                            this.testTitle = 'BSQ 双相情感障碍自评量表报告';
                            break;
                            case 'mbti':
                                console.log('加载MBTI测试数据');
                                try {
                                    if (typeof mbtiData !== 'undefined') {
                                        this.testData = mbtiData;
                                    } else {
                                        console.warn('mbtiData变量未定义，使用默认值');
                                        // 创建一个简单的默认数据结构
                                        this.testData = {
                                            questions: [
                                                { id: 1, dimension: 'E-I', text: '问题1' },
                                                { id: 2, dimension: 'E-I', text: '问题2' },
                                                { id: 3, dimension: 'E-I', text: '问题3' },
                                                { id: 4, dimension: 'E-I', text: '问题4' },
                                                { id: 5, dimension: 'E-I', text: '问题5' },
                                                { id: 6, dimension: 'S-N', text: '问题6' },
                                                { id: 7, dimension: 'S-N', text: '问题7' },
                                                { id: 8, dimension: 'S-N', text: '问题8' },
                                                { id: 9, dimension: 'S-N', text: '问题9' },
                                                { id: 10, dimension: 'S-N', text: '问题10' },
                                                { id: 11, dimension: 'T-F', text: '问题11' },
                                                { id: 12, dimension: 'T-F', text: '问题12' },
                                                { id: 13, dimension: 'T-F', text: '问题13' },
                                                { id: 14, dimension: 'T-F', text: '问题14' },
                                                { id: 15, dimension: 'T-F', text: '问题15' },
                                                { id: 16, dimension: 'J-P', text: '问题16' },
                                                { id: 17, dimension: 'J-P', text: '问题17' },
                                                { id: 18, dimension: 'J-P', text: '问题18' },
                                                { id: 19, dimension: 'J-P', text: '问题19' },
                                                { id: 20, dimension: 'J-P', text: '问题20' }
                                            ],
                                            dimensions: ['E-I', 'S-N', 'T-F', 'J-P'],
                                            types: {
                                                'ISTJ': '尽责的检查者 - 安静、严肃、通过条理性和可靠性获得成功。',
                                                'ISFJ': '尽职的护卫者 - 安静、友好、负责任、谨慎。',
                                                'INFJ': '神秘的智者 - 寻求意义和联系，关注如何提高人类福祉。',
                                                'INTJ': '独立的战略家 - 有独创性的思想家，有强烈的动力实现目标。',
                                                'ISTP': '灵巧的工匠 - 灵活和容忍，安静地观察直到问题出现。',
                                                'ISFP': '敏感的艺术家 - 安静、友好、敏感、善良。',
                                                'INFP': '理想的调停者 - 理想主义者，忠于价值观和重要的人。',
                                                'INTP': '逻辑的思想家 - 寻求提供对感兴趣问题的合理解释。',
                                                'ESTP': '活力的挑战者 - 灵活和宽容，采取实用方法。',
                                                'ESFP': '自由的表演者 - 外向、友好、接受力强。',
                                                'ENFP': '热情的梦想家 - 热情洋溢、富有想象力。',
                                                'ENTP': '大胆的思想家 - 敏锐、机敏、多才多艺。',
                                                'ESTJ': '高效的管理者 - 实际、现实、事实导向。',
                                                'ESFJ': '热心的守护者 - 热情、合作、积极。',
                                                'ENFJ': '热情的教导者 - 温暖、同情、敏感、负责任。',
                                                'ENTJ': '果断的指挥官 - 坦率、果断、承担领导责任。'
                                            }
                                        };
                                        console.log('已创建默认MBTI测试数据:', this.testData);
                                    }
                                    this.testTitle = 'MBTI 16种人格测试报告';
                                } catch (e) {
                                    console.error('加载MBTI数据出错:', e);
                                    // 设置默认标题和数据
                                    this.testTitle = 'MBTI 16种人格测试报告';
                                }
                            break;
                        default:
                            this.testData = scl90Data;
                                this.testTitle = '心理测试报告';
                        }
                    } catch (error) {
                        console.error('加载测试数据时出错:', error);
                        // 设置默认值
                        this.testTitle = '心理测试报告';
                    }
                },
                // 计算均分和阳性症状均分
                calculateScores() {
                    // 根据不同量表类型计算总分和均分
                    switch(this.testType) {
                        case 'scl90':
                            // SCL-90量表：90个题目，计算均分和阳性项目数
                            this.averageScore = this.totalScore / 90;
                            
                            // 阳性项目是得分≥2的项目
                            const positiveItems = Object.values(this.answers).filter(answer => answer >= 2).length;
                    this.positiveItems = positiveItems;
                            
                            // 阳性症状均分是所有阳性项目的分数总和除以阳性项目数
                            this.positiveAverageScore = positiveItems > 0 ? 
                                Object.values(this.answers).filter(answer => answer >= 2).reduce((sum, val) => sum + val, 0) / positiveItems : 0;
                            break;
                            
                        case 'sds':
                            // SDS量表：20个题目，计算原始总分后乘以1.25得到标准分
                            // 标准分才是临床判断依据
                            this.averageScore = this.totalScore / 20;
                            this.standardScore = Math.round(this.totalScore * 1.25);
                            
                            // SDS量表阳性项目是得分≥2的项目
                            this.positiveItems = Object.values(this.answers).filter(answer => answer >= 2).length;
                            this.positiveAverageScore = this.positiveItems > 0 ? 
                                Object.values(this.answers).filter(answer => answer >= 2).reduce((sum, val) => sum + val, 0) / this.positiveItems : 0;
                            break;
                            
                        case 'sas':
                            // SAS量表：20个题目，计算原始总分后乘以1.25得到标准分
                            // 标准分才是临床判断依据
                            this.averageScore = this.totalScore / 20;
                            this.standardScore = Math.round(this.totalScore * 1.25);
                            
                            // SAS量表阳性项目是得分≥2的项目
                            this.positiveItems = Object.values(this.answers).filter(answer => answer >= 2).length;
                            this.positiveAverageScore = this.positiveItems > 0 ? 
                                Object.values(this.answers).filter(answer => answer >= 2).reduce((sum, val) => sum + val, 0) / this.positiveItems : 0;
                            break;
                            
                        case 'bsq':
                            // BSQ量表：躁狂和抑郁两个维度各有项目，分别计算
                            this.averageScore = this.totalScore / 20; // BSQ总共20题
                            
                            // 获取躁狂和抑郁维度的均分
                            const manicQuestions = this.testData.questions.filter(q => q.dimension === '躁狂症状');
                            const depressiveQuestions = this.testData.questions.filter(q => q.dimension === '抑郁症状');
                            
                            let manicSum = 0, depressiveSum = 0;
                            let manicCount = 0, depressiveCount = 0;
                            
                            manicQuestions.forEach(q => {
                                if (this.answers[q.id - 1]) {
                                    manicSum += this.answers[q.id - 1];
                                    manicCount++;
                                }
                            });
                            
                            depressiveQuestions.forEach(q => {
                                if (this.answers[q.id - 1]) {
                                    depressiveSum += this.answers[q.id - 1];
                                    depressiveCount++;
                                }
                            });
                            
                            // 存储两个维度的均分，用于后续分析
                            this.manicScore = manicCount > 0 ? manicSum / manicCount : 0;
                            this.depressiveScore = depressiveCount > 0 ? depressiveSum / depressiveCount : 0;
                            
                            // BSQ量表阳性项目是得分≥3的项目（5选项量表）
                            this.positiveItems = Object.values(this.answers).filter(answer => answer >= 3).length;
                            this.positiveAverageScore = this.positiveItems > 0 ? 
                                Object.values(this.answers).filter(answer => answer >= 3).reduce((sum, val) => sum + val, 0) / this.positiveItems : 0;
                            break;
                            
                        default:
                            // 默认使用SCL-90的计算方式
                            this.averageScore = this.totalScore / 90;
                            this.positiveItems = Object.values(this.answers).filter(answer => answer >= 2).length;
                            this.positiveAverageScore = this.positiveItems > 0 ? this.totalScore / this.positiveItems : 0;
                    }
                },
                // 设置默认值
                setDefaultValues() {
                    switch(this.testType) {
                        case 'scl90':
                            this.totalScore = 134;
                            this.positiveItems = 30;
                            this.averageScore = this.totalScore / 90;
                            break;
                        case 'sds':
                            this.totalScore = 40;
                            this.positiveItems = 10;
                            this.averageScore = this.totalScore / 20;
                            break;
                        case 'sas':
                            this.totalScore = 38;
                            this.positiveItems = 9;
                            this.averageScore = this.totalScore / 20;
                            break;
                        case 'bsq':
                            this.totalScore = 48;
                            this.positiveItems = 12;
                            this.averageScore = this.totalScore / 32;
                            break;
                        default:
                            this.totalScore = 134;
                            this.positiveItems = 30;
                            this.averageScore = this.totalScore / 90;
                    }
                    this.positiveAverageScore = this.positiveItems > 0 ? this.totalScore / this.positiveItems : 0;
                },
                // 保存测试记录到本地存储
                saveTestRecord() {
                    try {
                        // 获取现有测试记录
                        let testRecords = JSON.parse(localStorage.getItem('testRecords')) || [];
                        
                        // 创建新的测试记录
                        const newRecord = {
                            id: Date.now().toString(),
                            type: this.testType,
                            title: this.testTitle,
                            date: new Date().toLocaleString('zh-CN', {
                                year: 'numeric',
                                month: '2-digit',
                                day: '2-digit',
                                hour: '2-digit',
                                minute: '2-digit'
                            }),
                            totalScore: this.testType === 'mbti' ? 0 : this.totalScore,
                            averageScore: this.testType === 'mbti' ? 0 : this.averageScore,
                            positiveItems: this.positiveItems || 0,
                            results: this.results,
                            summary: this.getTestSummary()
                        };
                        
                        // 为MBTI测试添加特定字段
                        if (this.testType === 'mbti') {
                            // 确保保存人格类型
                            newRecord.personalityType = this.personalityType || 'ISTJ';
                            
                            // 确保保存维度数据
                            if (this.mbtiDimensions) {
                                newRecord.mbtiDimensions = this.mbtiDimensions;
                            } else {
                                // 提供默认维度数据
                                newRecord.mbtiDimensions = {
                                    'E-I': [3, 7],
                                    'S-N': [6, 4],
                                    'T-F': [7, 3],
                                    'J-P': [8, 2]
                                };
                            }
                            console.log('保存MBTI测试记录:', {
                                type: newRecord.personalityType,
                                dimensions: newRecord.mbtiDimensions
                            });
                        }
                        
                        // 添加新记录到数组开头
                        testRecords.unshift(newRecord);
                        
                        // 限制记录数量，最多保存20条
                        if (testRecords.length > 20) {
                            testRecords = testRecords.slice(0, 20);
                        }
                        
                        // 保存到本地存储
                        localStorage.setItem('testRecords', JSON.stringify(testRecords));
                    } catch (error) {
                        console.error('保存测试记录失败:', error);
                    }
                },
                // 获取测试摘要
                getTestSummary() {
                    let summary = '';
                    
                    switch(this.testType) {
                        case 'scl90':
                            // SCL-90使用均分来判断
                            if (this.averageScore < 1.5) {
                                summary = '总体心理状况良好，各维度表现正常。';
                            } else if (this.averageScore < 2.5) {
                                summary = '存在轻度心理健康问题，建议关注自我调节。';
                            } else if (this.averageScore < 3.5) {
                                summary = '存在中度心理健康问题，建议寻求专业帮助。';
                            } else if (this.averageScore < 4.5) {
                                summary = '存在偏重心理健康问题，建议尽快寻求专业帮助。';
                            } else {
                                summary = '存在严重心理健康问题，建议立即寻求专业帮助。';
                            }
                            break;
                            
                        case 'sds':
                            // SDS使用标准分来判断
                            if (this.standardScore < 50) {
                                summary = '未见明显抑郁症状，心理状态良好。';
                            } else if (this.standardScore < 60) {
                                summary = '存在轻度抑郁症状，建议关注情绪变化。';
                            } else if (this.standardScore < 70) {
                                summary = '存在中度抑郁症状，建议寻求专业帮助。';
                            } else if (this.standardScore < 80) {
                                summary = '存在偏重抑郁症状，建议尽快寻求专业帮助。';
                            } else {
                                summary = '存在严重抑郁症状，建议立即寻求专业帮助。';
                            }
                            break;
                            
                        case 'sas':
                            // SAS使用标准分来判断
                            if (this.standardScore < 50) {
                                summary = '未见明显焦虑症状，心理状态良好。';
                            } else if (this.standardScore < 60) {
                                summary = '存在轻度焦虑症状，建议关注压力管理。';
                            } else if (this.standardScore < 70) {
                                summary = '存在中度焦虑症状，建议寻求专业帮助。';
                            } else if (this.standardScore < 80) {
                                summary = '存在偏重焦虑症状，建议尽快寻求专业帮助。';
                            } else {
                                summary = '存在严重焦虑症状，建议立即寻求专业帮助。';
                            }
                            break;
                            
                        case 'bsq':
                            // BSQ用两个维度的组合来判断
                            if (this.manicScore < 1.5 && this.depressiveScore < 1.5) {
                                summary = '未见明显情绪波动，心理状态稳定。';
                            } else if (this.manicScore >= 3.5 && this.depressiveScore >= 3.5) {
                                summary = '存在偏重的双相情感特征，建议尽快寻求专业评估。';
                            } else if (this.manicScore >= 4.5 || this.depressiveScore >= 4.5) {
                                summary = '存在严重的情绪问题，建议立即寻求专业评估。';
                            } else if (this.manicScore >= 2.5 || this.depressiveScore >= 2.5) {
                                summary = '存在中度情绪波动，建议寻求专业评估。';
                            } else {
                                summary = '存在轻度情绪波动，建议关注情绪变化。';
                            }
                            break;
                            
                        case 'mbti':
                            // MBTI测试摘要
                            if (this.personalityType) {
                                const typeName = this.getMbtiTypeName(this.personalityType);
                                summary = `您的人格类型是${this.personalityType}（${typeName}）。了解您的人格类型可以帮助您更好地认识自己的优势和潜力。`;
                            } else {
                                summary = '您已完成MBTI人格测试，请查看详细报告了解您的人格类型特点。';
                            }
                            break;
                            
                        default:
                            summary = '测试完成，请查看详细报告。';
                    }
                    
                    return summary;
                },
                goBack() {
                    // 清除会话存储中的测试数据，防止返回时重复生成报告
                    sessionStorage.removeItem('testAnswers');
                    sessionStorage.removeItem('testResults');
                    // 清除当前测试类型的特定数据
                    if (this.testType) {
                        sessionStorage.removeItem(`${this.testType}_answers`);
                        sessionStorage.removeItem(`${this.testType}_results`);
                    }
                    
                    // 检查是否是从历史记录查看的报告
                    const urlParams = new URLSearchParams(window.location.search);
                    const fromHistory = urlParams.get('from') === 'history';
                    
                    if (fromHistory) {
                        // 如果是从历史记录查看，返回到"我的测试"页面
                        window.location.href = 'mytests.html';
                    } else {
                        // 否则返回首页
                        window.location.href = 'index.html';
                    }
                },
                getRawScore(dimension) {
                    if (!this.testData) return 0;
                    
                    const dimensionQuestions = this.testData.questions.filter(q => q.dimension === dimension);
                    
                    // 检查answers对象是否为空或未定义
                    const hasAnswers = this.answers && typeof this.answers === 'object' && Object.keys(this.answers).length > 0;
                    
                    // 如果有answers数据，使用原始计算方法
                    if (hasAnswers) {
                        let total = 0;
                        dimensionQuestions.forEach(q => {
                            // 检查是否需要反向计分
                            if (q.reverse) {
                                // 反向计分：对于4个选项的量表，计算方式为5-原始分；对于5个选项的量表，计算方式为6-原始分
                                const maxScore = this.testType === 'sds' || this.testType === 'sas' ? 5 : 6;
                                total += maxScore - (this.answers[q.id - 1] || 0);
                            } else {
                                total += this.answers[q.id - 1] || 0;
                            }
                        });
                        return total;
                    } 
                    // 如果没有answers数据，但有results数据，则从均分估算原始分
                    else if (this.results && this.results[dimension]) {
                        // 从results中获取该维度的均分
                        const avgScore = this.results[dimension];
                        // 计算该维度的问题数量
                        const questionCount = dimensionQuestions.length;
                        // 估算原始分 = 均分 × 问题数量
                        return avgScore * questionCount;
                    }
                    
                    // 如果既没有answers也没有results数据，返回默认值
                    // 为每个维度设置一个合理的默认值
                    if (this.testType === 'scl90') {
                        const defaultScores = {
                            '躯体化': 12,
                            '强迫症状': 14,
                            '人际关系敏感': 13,
                            '抑郁': 13,
                            '焦虑': 10,
                            '敌对': 8,
                            '恐怖': 9,
                            '偏执': 9,
                            '精神病性': 8,
                            '睡眠': 6
                        };
                        return defaultScores[dimension] || dimensionQuestions.length * 1.5; // 默认值：题目数 × 1.5
                    }
                    
                    // 其他量表的默认值
                    return dimensionQuestions.length * 1.5; // 默认值：题目数 × 1.5
                },
                // 获取SDS量表的等级文本（基于标准分的判断标准）
                getSdsLevelText(score) {
                    // 将维度均分转换为近似的标准分等级
                    // SDS的标准为：<53正常，53-62轻度，63-72中度，73-82偏重，>82严重
                    // 而均分范围一般在1-4之间，需要进行换算
                    const adjustedScore = Math.round(score * 25); // 粗略换算为标准分范围
                    
                    if (adjustedScore < 53) return '正常';
                    if (adjustedScore < 63) return '轻度';
                    if (adjustedScore < 73) return '中度';
                    if (adjustedScore < 83) return '偏重';
                    return '严重';
                },
                
                getLevelText(score) {
                    // 统一所有测试类型为5个档位：正常、轻度、中度、偏重、严重
                    switch(this.testType) {
                        case 'sds':
                            // SDS使用标准分判断，需要特殊处理
                            return this.getSdsLevelText(score);
                        case 'scl90':
                        case 'sas':
                        case 'bsq':
                        default:
                            // 统一所有量表的评级标准
                            if (score < 1.5) return '正常';
                            if (score < 2.5) return '轻度';
                            if (score < 3.5) return '中度';
                            if (score < 4.5) return '偏重';
                            return '严重';
                    }
                },
                
                getShortLevelText(score) {
                    // 对SDS进行特殊处理
                    if (this.testType === 'sds') {
                        const level = this.getSdsLevelText(score);
                        if (level === '正常') return '正';
                        if (level === '轻度') return '轻';
                        if (level === '中度') return '中';
                        if (level === '偏重') return '偏';
                        return '重';
                    }
                    
                    // 其他量表使用原有逻辑
                    if (score < 1.5) {
                        return '正';
                    } else if (score >= 1.5 && score < 2.5) {
                        return '轻';
                    } else if (score >= 2.5 && score < 3.5) {
                        return '中';
                    } else if (score >= 3.5 && score < 4.5) {
                        return '偏';
                    } else {
                        return '重';
                    }
                },
                getScoreExplanation(score) {
                    // 统一所有测试类型的解释标准，使用5个档位
                    switch(this.testType) {
                        case 'scl90':
                            if (score < 1.5) return '您的得分在正常范围内，表明该维度表现良好。';
                            if (score < 2.5) return '您的得分显示轻度症状，建议适当关注。';
                            if (score < 3.5) return '您的得分显示中度症状，建议寻求专业帮助。';
                            if (score < 4.5) return '您的得分显示偏重症状，建议尽快寻求专业帮助。';
                            return '您的得分显示严重症状，建议立即寻求专业帮助。';
                            
                        case 'sds':
                            if (score < 1.5) return '该维度表现正常，未见明显抑郁症状。';
                            if (score < 2.5) return '该维度显示轻度抑郁症状，建议关注情绪变化。';
                            if (score < 3.5) return '该维度显示中度抑郁症状，建议寻求专业帮助。';
                            if (score < 4.5) return '该维度显示偏重抑郁症状，建议尽快寻求专业帮助。';
                            return '该维度显示严重抑郁症状，建议立即寻求专业帮助。';
                            
                        case 'sas':
                            if (score < 1.5) return '该维度表现正常，未见明显焦虑症状。';
                            if (score < 2.5) return '该维度显示轻度焦虑症状，建议关注压力管理。';
                            if (score < 3.5) return '该维度显示中度焦虑症状，建议寻求专业帮助。';
                            if (score < 4.5) return '该维度显示偏重焦虑症状，建议尽快寻求专业帮助。';
                            return '该维度显示严重焦虑症状，建议立即寻求专业帮助。';
                            
                        case 'bsq':
                            if (score < 1.5) return '该维度表现正常，未见明显症状。';
                            if (score < 2.5) return '该维度显示轻度症状，建议密切关注。';
                            if (score < 3.5) return '该维度显示中度症状，建议寻求专业评估。';
                            if (score < 4.5) return '该维度显示偏重症状，建议尽快寻求专业评估。';
                            return '该维度显示严重症状，建议立即寻求专业评估。';
                            
                        default:
                            if (score < 1.5) return '您的得分在正常范围内，表明该维度表现良好。';
                            if (score < 2.5) return '您的得分显示轻度症状，建议适当关注。';
                            if (score < 3.5) return '您的得分显示中度症状，建议寻求专业帮助。';
                            if (score < 4.5) return '您的得分显示偏重症状，建议尽快寻求专业帮助。';
                            return '您的得分显示严重症状，建议立即寻求专业帮助。';
                    }
                },
                getDetailedAnalysis(dimension, score) {
                    // MBTI测试的详细分析处理
                    if (this.testType === 'mbti') {
                        return this.getMbtiDimensionAnalysis(dimension, score);
                    }
                    
                    // 针对SAS量表，优化总分和各维度分析与建议
                    if (this.testType === 'sas') {
                        const standardScore = Math.round(this.totalScore * 1.25);
                        let explain = '';
                        // 总分分析
                        if (dimension === '总分') {
                            if (standardScore < 50) {
                                explain = '【分析】您的SAS标准分为' + standardScore + '分，处于正常范围。当前无明显焦虑症状，情绪状态稳定，生活和工作未受影响。\n\n【建议】\n- 继续保持健康生活方式和积极心态。\n- 定期自我评估，关注压力变化。\n- 培养兴趣爱好，增强抗压能力。\n- 学习基础的放松训练（如深呼吸、正念冥想），预防焦虑。';
                            } else if (standardScore < 60) {
                                explain = '【分析】您的SAS标准分为' + standardScore + '分，提示轻度焦虑。可能在特定情境下感到紧张不安，偶有心慌、手抖、出汗等生理反应，但不影响正常生活。\n\n【建议】\n- 每天进行15-20分钟深呼吸和渐进性肌肉放松训练。\n- 合理安排作息，避免任务堆积。\n- 练习正念冥想，专注当下，减少对未来的担忧。\n- 记录焦虑情境和应对方式，逐步建立自信。\n- 如症状持续，建议心理咨询。';
                            } else if (standardScore < 70) {
                                explain = '【分析】您的SAS标准分为' + standardScore + '分，提示中度焦虑。焦虑情绪持续存在，对生活有明显干扰，可能反复担心、难以控制思维，影响工作效率和人际关系。\n\n【建议】\n- 建议每周1-2次心理咨询（如认知行为疗法CBT、暴露疗法）。\n- 积极参与社交活动，获得情感支持。\n- 学习系统的压力管理和情绪调节方法。\n- 每天进行积极自我暗示，增强自信。\n- 必要时寻求家人支持，调整生活环境，减少压力源。';
                            } else if (standardScore < 80) {
                                explain = '【分析】您的SAS标准分为' + standardScore + '分，提示偏重焦虑。焦虑症状明显，日常生活受到严重干扰，可能出现惊恐发作、失眠、严重的躯体不适等。\n\n【建议】\n- 建议尽快就医，考虑药物治疗配合心理治疗。\n- 家人应密切陪伴，给予持续支持。\n- 减少环境压力源，创造安静稳定的环境。\n- 制定应对焦虑发作的应急计划。\n- 可能需要暂时调整工作或学习安排。';
                            } else {
                                explain = '【分析】您的SAS标准分为' + standardScore + '分，提示严重焦虑。强烈恐惧和不安，严重影响生活质量，可能出现频繁惊恐发作、严重失眠、回避社交等，生活能力明显受损。\n\n【建议】\n- 及时就医，遵医嘱服用抗焦虑药物。\n- 配合心理治疗（如CBT、支持性心理治疗、团体治疗）。\n- 家人应密切陪伴，协助就医，防止独处和极端行为。\n- 调整生活环境，减少压力源，参与康复活动。\n- 必要时进行危机干预和长期随访。';
                            }
                        } else {
                            // 各维度分析
                            if (score < 1.5) {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，处于正常范围。\n- 该方面未见明显焦虑表现，说明心理状态良好。\n- 日常生活、学习和工作未受影响。\n\n【建议】\n- 继续保持健康生活方式和积极心态。\n- 定期关注自身情绪和身体变化。\n- 培养兴趣爱好，增强抗压能力。`;
                            } else if (score < 2.5) {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示轻度异常。\n- 可能偶有${dimension === '焦虑情绪' ? '紧张、担忧、易怒' : dimension === '躯体症状' ? '心悸、出汗、肌肉紧张、胃肠不适' : '注意力分散、思维过度活跃、灾难化思维'}等表现。\n- 这些症状通常不会严重影响日常功能，但需关注变化。\n\n【建议】\n- 学习基础放松训练（如深呼吸、正念冥想）。\n- 规律作息，适度运动，保证睡眠。\n- 记录焦虑情境和应对方式。\n- 与亲友沟通，获得情感支持。`;
                            } else if (score < 3.5) {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示中度异常。\n- ${dimension === '焦虑情绪' ? '情绪波动大，易紧张、恐惧、易激惹' : dimension === '躯体症状' ? '频繁心悸、出汗、肌肉紧张、消化不良、睡眠障碍' : '思维反复担忧、难以自控、注意力难以集中'}，对生活有一定影响。\n- 可能影响学习、工作和人际关系。\n\n【建议】\n- 建议心理咨询，学习系统的情绪调节和压力管理。\n- 家人多陪伴，鼓励参与社交和兴趣活动。\n- 制定规律作息，合理安排生活。\n- 必要时寻求专业帮助。`;
                            } else if (score < 4.5) {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示偏重异常。\n- ${dimension === '焦虑情绪' ? '持续紧张、恐惧、频繁惊恐症状，难以有效控制' : dimension === '躯体症状' ? '明显心悸、出汗、肌肉僵硬、消化系统紊乱、显著失眠' : '频繁灾难化思维、注意力高度分散、日常任务困难'}，对生活产生显著影响。\n- 学习、工作效率明显下降，人际关系紧张。\n\n【建议】\n- 建议尽快就医评估，可能需要药物治疗。\n- 保持规律生活习惯，减少环境压力源。\n- 家人需密切关注情绪变化，提供稳定支持。\n- 进行系统性心理治疗，学习专业应对策略。`;
                            } else {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示严重异常。\n- ${dimension === '焦虑情绪' ? '持续强烈紧张、恐惧、频繁惊恐发作，完全难以自控' : dimension === '躯体症状' ? '严重心悸、出汗、肌肉僵硬、消化系统严重紊乱、重度失眠' : '持续灾难化思维、注意力极度分散、无法完成日常任务'}，严重影响生活。\n- 需高度重视，防止极端行为发生。\n\n【建议】\n- 立即就医，遵医嘱治疗。\n- 家人密切陪伴，防止独处。\n- 配合药物和心理治疗，制定康复计划。\n- 可能需要暂时调整工作和生活安排。`;
                            }
                        }
                        return explain;
                    }
                    // 针对SDS量表，进一步丰富每个维度的分析和建议
                    if (this.testType === 'sds') {
                        const standardScore = Math.round(this.totalScore * 1.25);
                        let explain = '';
                        // 针对总分，仍然输出总分分析
                        if (dimension === '总分') {
                            if (standardScore < 53) {
                                explain = '【分析】您的SDS标准分为' + standardScore + '分，处于正常范围，当前无明显抑郁症状。情绪状态良好，生活和工作未受影响。\n\n【建议】\n- 继续保持积极心态和健康生活方式。\n- 定期自我评估，关注情绪变化。\n- 建议培养兴趣爱好，增强心理韧性。';
                            } else if (standardScore < 63) {
                                explain = '【分析】您的SDS标准分为' + standardScore + '分，提示轻度抑郁。可能偶有情绪低落、兴趣减退、睡眠或食欲轻微变化。\n\n【建议】\n- 每周进行3次以上有氧运动（如慢跑、游泳）。\n- 主动与朋友交流，避免自我封闭。\n- 记录情绪日记，分析情绪变化。\n- 如症状持续，建议心理咨询。';
                            } else if (standardScore < 73) {
                                explain = '【分析】您的SDS标准分为' + standardScore + '分，提示中度抑郁。情绪低落较明显，日常活动受影响，可能伴有记忆力减退、注意力难以集中。\n\n【建议】\n- 建议每周1-2次专业心理咨询（如CBT、人际治疗）。\n- 制定规律作息，保证充足睡眠。\n- 培养兴趣爱好，转移注意力。\n- 必要时寻求家人支持。';
                            } else if (standardScore < 83) {
                                explain = '【分析】您的SDS标准分为' + standardScore + '分，提示偏重抑郁。情绪明显低落，日常功能受到严重影响，可能伴有明显的思维迟缓、自责自罪感及轻度自伤想法。\n\n【建议】\n- 建议尽快前往精神专科就诊评估。\n- 可能需要药物治疗配合心理治疗。\n- 家人应提供密切支持和陪伴。\n- 减少环境压力源，营造安静稳定的环境。\n- 可能需要暂时调整工作或学习安排。';
                            } else {
                                explain = '【分析】您的SDS标准分为' + standardScore + '分，提示严重抑郁。常感极度痛苦，对生活完全失去希望，可能有明显的自伤或自杀念头，社会功能严重受损。\n\n【建议】\n- 立即前往精神专科医院就诊。\n- 家人应密切陪伴，防止极端行为。\n- 遵医嘱进行药物和心理治疗。\n- 制定长期康复计划，定期复诊。\n- 可能需要居家照护或住院治疗。';
                            }
                        } else {
                            // 针对各维度均分，使用与标准分一致的判断标准
                            const levelText = this.getSdsLevelText(score);
                            
                            if (levelText === '正常') {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，处于正常范围。\n- 该维度未见明显抑郁表现，说明心理状态良好。\n- 日常生活、学习和工作未受影响。\n\n【建议】\n- 继续保持健康生活方式和积极心态。\n- 定期关注自身情绪和身体变化。\n- 培养兴趣爱好，增强抗压能力。`;
                            } else if (levelText === '轻度') {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示轻度抑郁。\n- 可能偶有${dimension === '情感症状' ? '情绪低落、兴趣减退、易感孤独' : dimension === '躯体症状' ? '疲劳、睡眠障碍、食欲变化、头痛等' : '注意力分散、思维消极、易自责'}等表现。\n- 这些症状通常不会严重影响日常功能，但需关注变化。\n\n【建议】\n- 适当运动，规律作息，保证睡眠。\n- 与亲友沟通，表达情绪，获得支持。\n- 记录情绪日记，分析诱因。\n- 学习正念冥想、放松训练等自我调节方法。`;
                            } else if (levelText === '中度') {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示中度抑郁。\n- ${dimension === '情感症状' ? '情绪低落较明显，兴趣丧失，易感无助、悲观' : dimension === '躯体症状' ? '持续疲劳、睡眠障碍、身体多处不适、精力下降' : '思维消极，注意力难以集中，常有自责自罪'}，对生活有一定影响。\n- 可能影响学习、工作和人际关系。\n\n【建议】\n- 建议心理咨询，学习情绪调节和压力管理。\n- 家人多陪伴，鼓励参与社交和兴趣活动。\n- 制定规律作息，合理安排生活。\n- 必要时寻求专业帮助。`;
                            } else if (levelText === '偏重') {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示偏重抑郁。\n- ${dimension === '情感症状' ? '情绪明显低落，兴趣严重丧失，持续悲观无助' : dimension === '躯体症状' ? '显著疲劳、明显睡眠障碍、身体多处不适、精力极低' : '思维明显消极，注意力严重不集中，持续自责自罪'}，对生活产生显著影响。\n- 日常生活能力明显下降，社会功能受损。\n\n【建议】\n- 建议尽快就医评估，可能需要药物治疗。\n- 保持规律生活，家人需密切关注情绪变化。\n- 减少环境压力，避免重要决策。\n- 建议专业心理治疗，必要时调整工作和学习安排。`;
                            } else {
                                explain = `【分析】${dimension}得分为${score.toFixed(2)}，提示严重抑郁。\n- ${dimension === '情感症状' ? '情绪极度低落，完全丧失兴趣，绝望感强烈，可能有自伤念头' : dimension === '躯体症状' ? '严重失眠、极度疲劳、身体多处严重不适，生活自理困难' : '持续消极思维，无法集中注意力，强烈自责自罪，可能有极端想法'}，严重影响生活。\n- 需高度重视，防止极端行为发生。\n\n【建议】\n- 立即就医，遵医嘱治疗。\n- 家人密切陪伴，防止独处。\n- 配合药物和心理治疗，制定康复计划。\n- 可能需要居家照护或住院治疗。`;
                            }
                        }
                        return explain;
                    }
                    // 针对BSQ量表，进一步丰富每个维度的分析说明和建议
                    if (this.testType === 'bsq') {
                        let explain = '';
                        if (score < 1.5) {
                            switch (dimension) {
                                case '躁狂':
                                    explain = '【分析】您的躁狂维度得分在正常范围，近期未见明显情绪高涨、精力过度充沛或冲动行为。躁狂状态下常见表现包括：情绪异常高涨、精力充沛、话多、思维奔逸、睡眠需求减少、冲动消费等。\n\n【建议】\n- 继续保持规律作息和健康生活方式。\n- 建议记录情绪变化，关注自身状态。\n- 家人可适当关注，帮助识别早期情绪变化。';
                                    break;
                                case '抑郁':
                                    explain = '【分析】您的抑郁维度得分在正常范围，近期未见明显情绪低落、兴趣减退或无助感。抑郁状态下常见表现包括：持续情绪低落、兴趣丧失、精力不足、睡眠障碍、食欲减退、自责自罪等。\n\n【建议】\n- 继续保持积极心态和良好社交。\n- 建议定期自我评估，预防情绪波动。\n- 家人可多鼓励和陪伴。';
                                    break;
                                case '混合':
                                    explain = '【分析】您的混合维度得分在正常范围，未见明显情绪快速波动或混合症状。混合状态下常见表现包括：情绪高涨与低落交替、思维和行为矛盾、冲动与消极并存。\n\n【建议】\n- 继续关注自身情绪变化。\n- 保持健康的生活节奏和压力管理。\n- 家人可协助观察，及时发现异常。';
                                    break;
                                case '情绪波动':
                                    explain = '【分析】您的情绪波动维度得分在正常范围，说明近期情绪较为平稳。情绪波动高时常见表现包括：情绪变化幅度大、易受外界影响、难以自我调节。\n\n【建议】\n- 继续保持良好的情绪管理习惯。\n- 建议适当运动、培养兴趣爱好。\n- 家人可多沟通，及时发现异常。';
                                    break;
                                default:
                                    explain = '各项症状均在正常范围，无需过度担心。建议继续保持健康的生活方式，定期进行自我评估。';
                            }
                        } else if (score >= 1.5 && score < 2.5) {
                            switch (dimension) {
                                case '躁狂':
                                    explain = '【分析】您的躁狂维度得分提示存在轻度情绪高涨或精力充沛。可能偶尔出现精力旺盛、话多、思维活跃、轻微冲动或冒险行为。需警惕情绪高涨持续时间和影响。\n\n【建议】\n- 记录情绪和行为变化，识别诱发因素。\n- 保持规律作息，避免过度劳累和刺激性活动。\n- 家人可多关注，及时沟通。\n- 如情绪高涨影响生活，建议咨询心理医生。';
                                    break;
                                case '抑郁':
                                    explain = '【分析】您的抑郁维度得分提示存在轻度情绪低落或兴趣减退。偶尔感到情绪低落、动力不足、对平时感兴趣的事物失去兴趣。\n\n【建议】\n- 关注情绪变化，尝试情绪表达和沟通。\n- 保持规律作息和适度运动。\n- 家人可多陪伴，鼓励参与社交活动。\n- 如情绪低落持续，建议寻求心理支持。';
                                    break;
                                case '混合':
                                    explain = '【分析】您的混合维度得分提示偶有情绪波动或混合体验。可能有时情绪高涨与低落交替出现，思维和行为偶有矛盾。\n\n【建议】\n- 记录情绪变化，识别混合期的诱因。\n- 保持规律生活，避免情绪刺激。\n- 家人可协助观察，必要时咨询专业人士。';
                                    break;
                                case '情绪波动':
                                    explain = '【分析】您的情绪波动维度得分提示存在轻度情绪起伏。情绪易受外界影响，波动幅度较小，偶尔因小事情绪变化。\n\n【建议】\n- 学习情绪调节技巧，如正念冥想、深呼吸。\n- 保持健康社交，获得家人朋友支持。\n- 记录情绪日记，帮助自我觉察。';
                                    break;
                                default:
                                    explain = '部分症状有轻度异常，建议关注自身状态。及时采取干预措施，必要时寻求专业帮助。';
                            }
                        } else if (score >= 2.5 && score < 3.5) {
                            switch (dimension) {
                                case '躁狂':
                                    explain = '【分析】您的躁狂维度得分为中度异常，近期可能经常出现情绪高涨、精力过度充沛、冲动行为等。表现为精力充沛、睡眠需求减少、夸大自信、话多、注意力分散、明显的冲动消费或冒险行为。\n\n【建议】\n- 建议及时与家人沟通，获得支持。\n- 规律作息，避免刺激性活动和高风险行为。\n- 家人应协助记录情绪和行为变化。\n- 必要时寻求精神科医生评估。';
                                    break;
                                case '抑郁':
                                    explain = '【分析】您的抑郁维度得分为中度异常，近期可能经常感到情绪低落、兴趣丧失、无助感。表现为悲观、无望、动力不足、睡眠障碍、食欲减退。\n\n【建议】\n- 建议与亲友沟通，获得情感支持。\n- 规律作息，适度运动，保持生活规律。\n- 家人应多陪伴，关注自伤风险。\n- 必要时寻求心理医生或精神科医生帮助。';
                                    break;
                                case '混合':
                                    explain = '【分析】您的混合维度得分为中度异常，近期可能出现情绪高涨与低落交替，思维和行为矛盾。表现为情绪波动大，冲动行为与消极情绪交替。\n\n【建议】\n- 建议家属密切关注，协助记录情绪变化。\n- 保持规律生活，避免诱发因素。\n- 必要时寻求专业评估和干预。';
                                    break;
                                case '情绪波动':
                                    explain = '【分析】您的情绪波动维度得分为中度异常，近期情绪变化明显，易受外界影响。表现为情绪起伏大，难以自我调节，影响工作、学习和人际关系。\n\n【建议】\n- 学习情绪管理和压力调节技巧。\n- 家人应多沟通，协助情绪疏导。\n- 必要时寻求心理咨询。';
                                    break;
                                default:
                                    explain = '部分症状为中度异常，建议及时关注并调整。建议寻求专业帮助，制定个性化的干预方案。';
                            }
                        } else if (score >= 3.5 && score < 4.5) {
                            switch (dimension) {
                                case '躁狂':
                                    explain = '【分析】您的躁狂维度得分为偏重异常，近期频繁出现显著情绪高涨、精力过度充沛、明显冲动行为。表现为持续精力旺盛、睡眠极少、显著夸大自信、话多不停、注意力极度分散、频繁冲动消费、多次冒险行为。\n\n【建议】\n- 建议尽快寻求精神科医生专业评估。\n- 家人应密切关注，防止高风险行为。\n- 减少环境刺激，创造稳定环境。\n- 可能需要药物干预和心理疏导。\n- 必要时调整工作和生活安排。';
                                    break;
                                case '抑郁':
                                    explain = '【分析】您的抑郁维度得分为偏重异常，持续处于情绪低落、兴趣全面丧失、强烈无助感状态。表现为明显悲观、绝望感强烈、动力极低、严重睡眠障碍、食欲显著减退、可能有轻度自伤想法。\n\n【建议】\n- 建议尽快前往精神专科就诊评估。\n- 家人应密切陪伴，关注自伤风险。\n- 可能需要药物治疗配合心理治疗。\n- 减少环境压力，营造安全稳定的环境。\n- 调整日常活动和工作安排。';
                                    break;
                                case '混合':
                                    explain = '【分析】您的混合维度得分为偏重异常，经常出现情绪高涨与低落频繁交替，思维和行为明显矛盾。表现为情绪极度不稳定，冲动与消极反复交替，可能出现危险行为倾向。\n\n【建议】\n- 建议尽快寻求精神科医生专业评估。\n- 家属应密切陪伴，防止高风险行为。\n- 可能需要药物干预和心理治疗。\n- 创造稳定、低刺激的环境。\n- 制定情绪危机应对计划。';
                                    break;
                                case '情绪波动':
                                    explain = '【分析】您的情绪波动维度得分为偏重异常，情绪极不稳定，无法自控，严重影响工作生活。表现为情绪变化剧烈，完全难以自我调节，严重影响人际关系和日常功能。\n\n【建议】\n- 建议尽快寻求专业评估和治疗。\n- 家人需密切关注，协助情绪调节。\n- 可能需要药物和心理治疗结合。\n- 减少环境应激源，建立稳定的生活规律。\n- 暂时调整工作和社交活动。';
                                    break;
                                default:
                                    explain = '部分症状为偏重异常，需要尽快寻求专业帮助。建议综合药物和心理治疗，并调整生活环境和安排。';
                            }
                        } else {
                            switch (dimension) {
                                case '躁狂':
                                    explain = '【分析】您的躁狂维度得分为严重异常，长期处于情绪高涨、精力过度充沛、冲动行为频发的状态，严重影响生活。表现为持续精力旺盛、几乎不睡觉、极度夸大自信、话多不停、注意力极度分散、大量冲动消费、频繁危险行为，社会功能完全受损。\n\n【建议】\n- 强烈建议立即寻求精神科医生专业评估。\n- 可能需要住院治疗，接受系统药物治疗和危机干预。\n- 家属需全程陪伴，协助就医和安全保护。\n- 暂停工作和重要决策，完全调整生活安排。\n- 建立长期康复计划和随访方案。';
                                    break;
                                case '抑郁':
                                    explain = '【分析】您的抑郁维度得分为严重异常，长期处于极度情绪低落、完全丧失兴趣、强烈绝望感状态，生活能力严重受损。表现为极度悲观绝望、完全丧失动力、严重睡眠和饮食障碍，显著存在自伤或自杀想法，社会功能完全丧失。\n\n【建议】\n- 强烈建议立即寻求精神科医生专业评估。\n- 可能需要住院治疗，接受系统药物治疗和危机干预。\n- 家属需24小时陪伴，严防自伤风险。\n- 需要长期综合治疗，包括药物、心理和社会功能康复。\n- 建立长期随访和复发预防计划。';
                                    break;
                                case '混合':
                                    explain = '【分析】您的混合维度得分为严重异常，长期出现情绪高涨与低落急剧交替，思维和行为极度矛盾混乱，严重影响社会功能。表现为情绪极度不稳定，冲动与消极急剧交替，频繁出现危险行为，社会功能完全丧失。\n\n【建议】\n- 强烈建议立即寻求精神科医生专业评估。\n- 需要住院治疗，接受专业药物和心理治疗。\n- 家属需全程陪伴，严防危险行为。\n- 建立长期康复计划，包括药物治疗、心理干预和社会功能恢复。\n- 需要定期随访和复发预防管理。';
                                    break;
                                case '情绪波动':
                                    explain = '【分析】您的情绪波动维度得分为严重异常，情绪极度不稳定，完全失控，严重影响生活和人际关系。表现为情绪变化剧烈频繁，完全无法自控，可能伴有频繁冲动行为或严重自伤风险，生活能力严重受损。\n\n【建议】\n- 强烈建议立即寻求精神科医生专业评估。\n- 可能需要住院治疗和危机干预。\n- 家属需全程密切陪伴，建立安全保护。\n- 需要长期综合治疗，包括药物、心理治疗和社会功能恢复。\n- 建立长期随访和支持系统。';
                                    break;
                                default:
                                    explain = '多个症状呈严重异常，需要立即寻求专业帮助。需要制定全面的综合治疗方案，包括住院治疗、药物治疗、心理治疗和社会功能恢复训练。';
                            }
                        }
                        return explain;
                    }
                    // 根据维度和实际得分返回相应的分析
                    const rawScore = this.getRawScore(dimension);
                    
                    // 获取维度的项目数量
                    const dimensionQuestions = scl90Data.questions.filter(q => q.dimension === dimension);
                    const itemCount = dimensionQuestions.length;
                    
                    // 各维度的基本描述
                    const baseDescriptions = {
                        '躯体化': `反映身体不适感，包括心血管、胃肠道、呼吸和其他系统的主诉不适，以及头痛、背痛、肌肉酸痛等。该分量表包含${itemCount}个项目。`,
                        '抑郁': `反映与临床上抑郁症状群相联系的广泛的概念，包括心境低落、兴趣减退、精力缺乏、绝望感以及与认知和躯体相关的症状。该分量表包含${itemCount}个项目。`,
                        '焦虑': `包括一些通常临床上明显与焦虑症状相联系的症状与体验，如紧张、担忧、恐惧、惊恐发作以及躯体相关症状。该分量表包含${itemCount}个项目。`,
                        '睡眠': `反映睡眠及饮食情况，包括入睡困难、早醒、睡眠质量差、睡眠中断以及相关的生理功能障碍。该分量表包含${itemCount}个项目。`,
                        '强迫症状': `主要指那些明知没有必要，但又无法摆脱的无意义的思想、冲动和行为，以及相关的认知障碍。该分量表包含${itemCount}个项目。`,
                        '人际关系敏感': `主要是指某些人际的不自在与自卑感，特别是与其他人相比较时更加突出，包括自我贬低、社交回避和人际互动中的不适感。该分量表包含${itemCount}个项目。`,
                        '敌对': `主要从三方面来反映敌对的表现：思想、感情及行为，包括愤怒、攻击性、易激惹和怨恨等。该分量表包含${itemCount}个项目。`,
                        '恐怖': `与传统的恐怖状态或广场恐怖症所反映的内容基本一致，包括特定情境恐惧和回避行为。该分量表包含${itemCount}个项目。`,
                        '偏执': `主要指投射性思维，敌对，猜疑，妄想，被动体验和夸大等，反映思维的病理性扭曲。该分量表包含${itemCount}个项目。`,
                        '精神病性': `反映各式各样的急性症状和行为，包括思维内容和形式的异常、幻觉和妄想等精神病性体验。该分量表包含${itemCount}个项目。`
                    };
                    
                    // 根据不同维度和得分范围返回具体分析
                    let detailedAnalysis = '';
                    
                    // 最低可能得分和最高可能得分
                    const minPossibleScore = 0;           // 最低可能得分（全部选0分）
                    const maxPossibleScore = itemCount * 4; // 最高可能得分（全部选4分）
                    
                    // 计算各分段的均分界限
                    const normalMax = 1.8;  // 正常范围上限均分
                    const mildMax = 2.6;    // 轻度症状上限均分
                    const moderateMax = 3.4; // 中度症状上限均分
                    const severeMax = 4.2;   // 偏重症状上限均分
                    
                    // 计算对应的原始分界限
                    const normalMaxRaw = Math.round(normalMax * itemCount);
                    const mildMaxRaw = Math.round(mildMax * itemCount);
                    const moderateMaxRaw = Math.round(moderateMax * itemCount);
                    const severeMaxRaw = Math.round(severeMax * itemCount);
                    
                    // 根据原始分判断分段，确保原始分在报告的得分区间内
                    // 针对睡眠因子的特殊处理
                    if (dimension === '睡眠' && rawScore <= normalMaxRaw) {
                        // 正常范围 (均分<1.8)
                        detailedAnalysis = `
                        详细分析：
                        得分在${minPossibleScore}-${normalMaxRaw}分之间（均分<${normalMax}）：
                        - ${dimension}症状在正常范围内
                        - 心理状态良好，适应能力强
                        - 能够有效应对日常压力和挑战
                        - 建议继续保持健康的生活方式和积极的心态
                        - 定期进行自我关注和心理调适`;
                    } else if (rawScore > normalMaxRaw && rawScore <= mildMaxRaw) {
                        // 轻度症状 (均分1.8-2.6)
                        detailedAnalysis = `
                        详细分析：
                        得分在${normalMaxRaw+1}-${mildMaxRaw}分之间（均分${normalMax}-${mildMax}）：
                        - 提示存在轻度${dimension}症状
                        - ${getMildSymptomsForDimension(dimension)}
                        - 这些症状通常不会严重影响日常功能
                        - 建议关注自我调节和压力管理
                        - 培养健康的生活习惯和积极的应对方式
                        - 增强脑韧性和情绪调节能力`;
                    } else if (rawScore > mildMaxRaw && rawScore <= moderateMaxRaw) {
                        // 中度症状 (均分2.6-3.4)
                        detailedAnalysis = `
                        详细分析：
                        得分在${mildMaxRaw+1}-${moderateMaxRaw}分之间（均分${mildMax}-${moderateMax}）：
                        - 表明存在中度${dimension}症状
                        - ${getModerateSymptomsForDimension(dimension)}
                        - 这些症状可能对日常生活和工作效率造成明显影响
                        - 建议寻求专业心理咨询
                        - 学习针对性的应对策略和自我调节技巧
                        - 保持规律的生活方式和健康的社交支持`;
                    } else if (rawScore > moderateMaxRaw && rawScore <= severeMaxRaw) {
                        // 偏重症状 (均分3.4-4.2)
                        detailedAnalysis = `
                        详细分析：
                        得分在${moderateMaxRaw+1}-${severeMaxRaw}分之间（均分${moderateMax}-${severeMax}）：
                        - 表明存在偏重的${dimension}症状
                        - ${getSevereSymptomsForDimension(dimension)}
                        - 这些症状可能严重影响日常生活和社会功能
                        - 建议寻求专业精神科或心理医生评估
                        - 可能需要综合治疗方案，包括药物治疗和心理治疗
                        - 建议进行定期随访，评估症状变化`;
                    } else {
                        // 严重症状 (均分>4.2)
                        detailedAnalysis = `
                        详细分析：
                        得分在${severeMaxRaw+1}-${maxPossibleScore}分之间（均分>${severeMax}）：
                        - 表明存在严重的${dimension}症状
                        - ${getSevereSymptomsForDimension(dimension)}
                        - 这些症状严重影响日常生活和社会功能
                        - 强烈建议立即寻求专业精神科评估和治疗
                        - 需要综合治疗方案，包括药物治疗和心理治疗
                        - 建议密切随访，持续评估症状变化`;
                    }
                    
                    return baseDescriptions[dimension] + detailedAnalysis;
                    
                    // 辅助函数：获取各维度的严重症状描述
                    function getSevereSymptomsForDimension(dim) {
                        // 函数内容保持不变
                        const symptoms = {
                            '躯体化': '可能表现为持续的多系统躯体不适，如严重的头痛、肌肉酸痛、心悸、胸闷、胃肠不适等',
                            '抑郁': '可能表现为持续的情绪低落、绝望感、无价值感，严重时可能出现自伤或自杀的想法',
                            '焦虑': '可能表现为持续的紧张、担忧和恐惧感，伴有明显的自主神经系统症状，如心悸、出汗、呼吸急促等',
                            '睡眠': '可能表现为严重的失眠、早醒或睡眠中断，睡眠质量显著下降，影响日间功能',
                            '强迫症状': '可能表现为反复的强迫思维或行为，这些症状显著干扰日常生活，尝试抵抗会引起明显焦虑',
                            '人际关系敏感': '可能在社交情境中体验到强烈的不适和自卑感，过度关注他人评价，可能出现明显的社交回避行为',
                            '敌对': '可能经常感到强烈的愤怒和易怒，可能出现言语或行为上的攻击性表现，对挫折的耐受力极低',
                            '恐怖': '可能出现强烈的特定情境恐惧，面对恐惧情境时出现明显的生理反应，显著的回避行为严重影响日常功能',
                            '偏执': '可能表现为强烈的猜疑和不信任，认为他人有敌意或恶意，过度警觉和防备，可能出现关系妄想',
                            '精神病性': '可能出现思维内容和形式的异常，可能有幻觉或妄想体验，社会功能可能受到显著影响'
                        };
                        return symptoms[dim] || '症状表现较为严重';
                    }
                    
                    // 辅助函数：获取各维度的中度症状描述
                    function getModerateSymptomsForDimension(dim) {
                        const symptoms = {
                            '躯体化': '可能表现为经常性的身体不适感，如头痛、肌肉紧张、心慌、胸闷症状',
                            '抑郁': '可能表现为明显的情绪低落，对日常活动兴趣减退，可能伴有睡眠问题和精力减退',
                            '焦虑': '可能经常感到紧张和担忧，对多个生活领域存在过度担忧，常伴有躯体症状如肌肉紧张、心悸',
                            '睡眠': '可能存在明显的睡眠困扰，如入睡困难、睡眠中断或早醒，影响日间精力',
                            '强迫症状': '可能存在明显的强迫思维或行为，这些症状对日常生活造成一定影响，需要额外的时间和精力应对',
                            '人际关系敏感': '在社交情境中经常感到不自在，对批评和拒绝特别敏感，可能过度解读他人的言行',
                            '敌对': '经常感到烦躁和不满，可能在压力下表现出明显的易怒性，对批评和冒犯反应强烈',
                            '恐怖': '在特定情境中经历明显的恐惧反应，可能出现一定程度的回避行为，对日常生活造成一定干扰',
                            '偏执': '对他人的动机和意图持怀疑态度，可能过度解读他人的言行，在人际关系中保持警惕和防备',
                            '精神病性': '可能出现思维内容的轻度异常，可能有现实检验能力的部分减弱，社会功能可能受到一定影响'
                        };
                        return symptoms[dim] || '症状表现较为明显';
                    }
                    
                    // 辅助函数：获取各维度的轻度症状描述
                    function getMildSymptomsForDimension(dim) {
                        const symptoms = {
                            '躯体化': '可能表现为偶尔的头痛、肌肉紧张等轻微躯体不适',
                            '抑郁': '可能偶尔感到情绪低落，但仍能应对日常生活，可能出现轻度的兴趣减退',
                            '焦虑': '偶尔出现担忧和紧张感，可能在压力情境下加重，对日常功能影响有限',
                            '睡眠': '可能偶尔出现入睡困难或睡眠中断，但总体睡眠质量尚可',
                            '强迫症状': '可能偶尔出现一些重复性思维或行为，但通常能够控制这些冲动',
                            '人际关系敏感': '在某些社交情境中可能感到不适，对批评有一定敏感性，但能够应对',
                            '敌对': '偶尔感到烦躁或不耐烦，在特定情境下可能表现出轻微易怒，通常能够控制负面情绪表达',
                            '恐怖': '对特定情境有一定不适感，可能有轻微回避倾向，但不显著影响日常生活',
                            '偏执': '在某些情境下可能表现出谨慎和怀疑，对批评和负面评价较为敏感，但通常能够保持合理判断',
                            '精神病性': '可能在压力下出现短暂的思维异常，但现实检验能力基本完好，社会功能受影响不明显'
                        };
                        return symptoms[dim] || '症状表现轻微';
                    }
                },
                // 添加处理MBTI结果的方法
                calculateMBTI() {
                    try {
                        // 尝试从URL参数获取人格类型
                        const urlParams = new URLSearchParams(window.location.search);
                        const personalityTypeParam = urlParams.get('personalityType');
                        
                        if (personalityTypeParam) {
                            // 如果URL中直接包含人格类型，直接使用
                            this.personalityType = personalityTypeParam;
                            console.log('从URL获取MBTI人格类型:', this.personalityType);
                            
                            // 尝试获取维度数据
                            const mbtiDimensionsParam = urlParams.get('mbtiDimensions');
                            if (mbtiDimensionsParam) {
                                try {
                                    const dimensionsData = JSON.parse(decodeURIComponent(mbtiDimensionsParam));
                                    
                                    // 检查是否已经是数组格式
                                    if (Array.isArray(dimensionsData['E-I'])) {
                                        this.mbtiDimensions = dimensionsData;
                                        console.log('已从URL获取MBTI维度数据(数组格式):', this.mbtiDimensions);
                                    } else {
                                        // 转换为报告页面期望的格式
                                        this.mbtiDimensions = {
                                            'E-I': [dimensionsData['E-I'].e, dimensionsData['E-I'].i],
                                            'S-N': [dimensionsData['S-N'].s, dimensionsData['S-N'].n],
                                            'T-F': [dimensionsData['T-F'].t, dimensionsData['T-F'].f],
                                            'J-P': [dimensionsData['J-P'].j, dimensionsData['J-P'].p]
                                        };
                                        
                                        console.log('已从URL获取并转换MBTI维度数据(对象格式):', this.mbtiDimensions);
                                    }
                                    return;
                                } catch (e) {
                                    console.error('解析mbtiDimensions参数失败', e);
                                }
                            }
                        }
                        
                        // 如果无法从URL直接获取参数，则进行计算
                        // 初始化四个维度的计数
                        const dimensions = {
                            'E-I': [0, 0], // [E, I]
                            'S-N': [0, 0], // [S, N]
                            'T-F': [0, 0], // [T, F]
                            'J-P': [0, 0]  // [J, P]
                        };
                        
                        // 确保answers是一个对象且不为空
                        if (!this.answers || typeof this.answers !== 'object' || Object.keys(this.answers).length === 0) {
                            console.warn('没有有效的MBTI测试答案');
                            this.personalityType = 'ISTJ'; // 设置默认类型
                            this.mbtiDimensions = {
                                'E-I': [3, 7],
                                'S-N': [6, 4],
                                'T-F': [7, 3],
                                'J-P': [8, 2]
                            };
                            return;
                        }
                        
                        // 根据答案统计每个维度的分数
                        Object.entries(this.answers).forEach(([questionId, answer]) => {
                            const question = this.testData.questions.find(q => q.id === parseInt(questionId));
                            if (!question) return;
                            
                            const dim = question.dimension;
                            if (answer === 1) { // 选择第一个选项 (注意：修改为处理MBTI专业版的选项)
                                dimensions[dim][0]++;
                            } else if (answer === 2) { // 选择第二个选项
                                dimensions[dim][1]++;
                            }
                        });
                        
                        // 确保每个维度都至少有一个数值，防止出现0/0情况
                        Object.keys(dimensions).forEach(dim => {
                            if (dimensions[dim][0] === 0 && dimensions[dim][1] === 0) {
                                dimensions[dim] = [1, 1]; // 设置一个平衡的默认值
                            }
                        });
                        
                        // 确定每个维度的优势倾向
                        let type = '';
                        type += dimensions['E-I'][0] >= dimensions['E-I'][1] ? 'E' : 'I';
                        type += dimensions['S-N'][0] >= dimensions['S-N'][1] ? 'S' : 'N';
                        type += dimensions['T-F'][0] >= dimensions['T-F'][1] ? 'T' : 'F';
                        type += dimensions['J-P'][0] >= dimensions['J-P'][1] ? 'J' : 'P';
                        
                        this.personalityType = type;
                        this.mbtiDimensions = dimensions;
                    } catch (error) {
                        console.error('计算MBTI结果时出错:', error);
                        // 出错时设置一个默认类型
                        this.personalityType = 'ISTJ';
                        this.mbtiDimensions = {
                            'E-I': [3, 7],
                            'S-N': [6, 4],
                            'T-F': [7, 3],
                            'J-P': [8, 2]
                        };
                    }
                },
                // 修改computeResults方法以支持MBTI
                computeResults() {
                    if (!this.testData || !this.answers || Object.keys(this.answers).length === 0) {
                        return;
                    }
                    
                    // 根据测试类型计算不同的结果
                    switch (this.testType) {
                        case 'scl90':
                            // SCL-90计算逻辑
                            // ...
                            break;
                        case 'sds':
                            // SDS计算逻辑
                            // ...
                            break;
                        case 'sas':
                            // SAS计算逻辑
                            // ...
                            break;
                        case 'bsq':
                            // BSQ计算逻辑
                            // ...
                            break;
                        case 'mbti':
                            // MBTI计算逻辑
                            this.calculateMBTI();
                            break;
                    }
                    // ...
                },
                // MBTI相关方法
                getMbtiCardStyle(type) {
                    const colors = {
                        'ISTJ': 'linear-gradient(135deg, #3498db 0%, #2c3e50 100%)',
                        'ISFJ': 'linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%)',
                        'INFJ': 'linear-gradient(135deg, #1abc9c 0%, #16a085 100%)',
                        'INTJ': 'linear-gradient(135deg, #34495e 0%, #2c3e50 100%)',
                        'ISTP': 'linear-gradient(135deg, #3498db 0%, #2980b9 100%)',
                        'ISFP': 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',
                        'INFP': 'linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%)',
                        'INTP': 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)',
                        'ESTP': 'linear-gradient(135deg, #e67e22 0%, #d35400 100%)',
                        'ESFP': 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',
                        'ENFP': 'linear-gradient(135deg, #f1c40f 0%, #f39c12 100%)',
                        'ENTP': 'linear-gradient(135deg, #2ecc71 0%, #27ae60 100%)',
                        'ESTJ': 'linear-gradient(135deg, #3498db 0%, #2980b9 100%)',
                        'ESFJ': 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)',
                        'ENFJ': 'linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%)',
                        'ENTJ': 'linear-gradient(135deg, #2c3e50 0%, #2980b9 100%)'
                    };
                    return { background: colors[type] || 'linear-gradient(135deg, #3498db 0%, #2c3e50 100%)' };
                },
                getMbtiTypeName(type) {
                    const names = {
                        'ISTJ': '尽责的检查者',
                        'ISFJ': '尽职的护卫者',
                        'INFJ': '神秘的智者',
                        'INTJ': '独立的战略家',
                        'ISTP': '灵巧的工匠',
                        'ISFP': '敏感的艺术家',
                        'INFP': '理想的调停者',
                        'INTP': '逻辑的思想家',
                        'ESTP': '活力的挑战者',
                        'ESFP': '自由的表演者',
                        'ENFP': '热情的梦想家',
                        'ENTP': '大胆的思想家',
                        'ESTJ': '高效的管理者',
                        'ESFJ': '热心的守护者',
                        'ENFJ': '热情的教导者',
                        'ENTJ': '果断的指挥官'
                    };
                    return names[type] || '';
                },
                // 添加处理MBTI维度分析的方法
                getMbtiDimensionAnalysis(dimension, score) {
                    // 默认返回空字符串，防止undefined
                    if (!dimension || dimension.indexOf('-') === -1) {
                        return '';
                    }
                    
                    // 解析维度
                    const [dim1, dim2] = dimension.split('-');
                    const values = this.mbtiDimensions[dimension] || [5, 5];
                    const total = values[0] + values[1];
                    const percent1 = Math.round((values[0] / total) * 100);
                    const percent2 = Math.round((values[1] / total) * 100);
                    
                    // 根据不同维度返回不同的分析结果
                    if (dimension === 'E-I') {
                        if (percent1 >= percent2) {
                            return `您偏向外向(E)型人格(${percent1}%)，相比内向(I)型人格(${percent2}%)。外向型的人倾向于从外部世界获取能量，喜欢社交活动，乐于与他人互动，通常表现得开朗、健谈。`;
                        } else {
                            return `您偏向内向(I)型人格(${percent2}%)，相比外向(E)型人格(${percent1}%)。内向型的人倾向于从内心世界获取能量，喜欢独处和深度思考，通常先思考后行动，珍视私人空间。`;
                        }
                    } else if (dimension === 'S-N') {
                        if (percent1 >= percent2) {
                            return `您偏向感觉(S)型人格(${percent1}%)，相比直觉(N)型人格(${percent2}%)。感觉型的人注重具体事实和细节，依靠感官感知世界，关注实际和当下的体验，倾向于循序渐进地解决问题。`;
                        } else {
                            return `您偏向直觉(N)型人格(${percent2}%)，相比感觉(S)型人格(${percent1}%)。直觉型的人注重概念和可能性，寻找模式和关联，关注未来和潜力，倾向于用创新的方式解决问题。`;
                        }
                    } else if (dimension === 'T-F') {
                        if (percent1 >= percent2) {
                            return `您偏向思考(T)型人格(${percent1}%)，相比情感(F)型人格(${percent2}%)。思考型的人在决策时注重逻辑和客观分析，追求公平和一致性，可能表现得理性和直接。`;
                        } else {
                            return `您偏向情感(F)型人格(${percent2}%)，相比思考(T)型人格(${percent1}%)。情感型的人在决策时注重个人价值观和他人感受，追求和谐和共识，通常表现得有同理心和温和。`;
                        }
                    } else if (dimension === 'J-P') {
                        if (percent1 >= percent2) {
                            return `您偏向判断(J)型人格(${percent1}%)，相比感知(P)型人格(${percent2}%)。判断型的人喜欢有计划和组织的生活，追求确定性和结构，喜欢做决定并完成任务。`;
                        } else {
                            return `您偏向感知(P)型人格(${percent2}%)，相比判断(J)型人格(${percent1}%)。感知型的人喜欢灵活和自发的生活，追求新的体验和选择，保持开放的态度，适应变化的能力强。`;
                        }
                    }
                    
                    return '';
                },
                // 从URL参数中加载得分数据
                loadScoresFromURL() {
                    try {
                        console.log('正在从URL参数加载得分数据...');
                        const urlParams = new URLSearchParams(window.location.search);
                        
                        // 解析总分和各维度得分
                        const resultsParam = urlParams.get('results');
                        if (resultsParam) {
                            try {
                                // 解析维度结果参数
                                this.results = JSON.parse(decodeURIComponent(resultsParam));
                                console.log('已加载维度结果:', this.results);
                            } catch (e) {
                                console.error('解析results参数失败', e);
                                this.results = {};
                            }
                        }
                        
                        // 解析总分
                        this.totalScore = parseFloat(urlParams.get('totalScore')) || 
                                        (this.testType === 'scl90' ? 134 : 
                                         this.testType === 'sds' || this.testType === 'sas' ? 40 : 
                                         this.testType === 'bsq' ? 48 : 
                                         this.testType === 'mbti' ? 50 : 90);
                        
                        console.log('测试类型:', this.testType, '总分:', this.totalScore);
                        
                        // 解析标准分
                        this.standardScore = parseFloat(urlParams.get('standardScore')) || 
                                           (this.testType === 'sds' || this.testType === 'sas' ? Math.round(this.totalScore * 1.25) : 0);
                        
                        // 解析均分
                        this.averageScore = parseFloat(urlParams.get('averageScore')) || 
                                          (this.testType === 'scl90' ? this.totalScore / 90 : 
                                           this.testType === 'sds' || this.testType === 'sas' ? this.totalScore / 20 : 
                                           this.testType === 'bsq' ? this.totalScore / 20 : 
                                           this.testType === 'mbti' ? this.totalScore / 90 : 0);
                        
                        // 解析阳性项目数
                        this.positiveItems = parseInt(urlParams.get('positiveItems')) || 
                                           (this.testType === 'scl90' ? 30 : 
                                            this.testType === 'sds' || this.testType === 'sas' ? 10 : 
                                            this.testType === 'bsq' ? 12 : 15);
                        
                        // 解析阳性症状均分
                        this.positiveAverageScore = parseFloat(urlParams.get('positiveAverageScore')) || 
                                                  (this.positiveItems > 0 ? this.totalScore / this.positiveItems : 
                                                   this.testType === 'scl90' ? 3.2 : 
                                                   this.testType === 'sds' || this.testType === 'sas' ? 2.8 : 
                                                   this.testType === 'bsq' ? 3.0 : 2.5);
                        
                        // 如果没有从URL加载到数据，计算默认值
                        if (Object.keys(this.results).length === 0) {
                            this.setDefaultValues();
                        }
                        
                        console.log('得分加载完成:', {
                            totalScore: this.totalScore,
                            standardScore: this.standardScore, 
                            averageScore: this.averageScore,
                            positiveItems: this.positiveItems,
                            positiveAverageScore: this.positiveAverageScore
                        });
                    } catch (error) {
                        console.error('加载得分数据失败:', error);
                        this.setDefaultValues();
                    }
                },
                // 确保所有分数都有合理的非零值
                validateScores() {
                    // 确保总分不为0
                    if (this.totalScore <= 0) {
                        if (this.testType === 'scl90') {
                            this.totalScore = 134;
                        } else if (this.testType === 'sds' || this.testType === 'sas') {
                            this.totalScore = 40;
                        } else if (this.testType === 'bsq') {
                            this.totalScore = 48;
                        } else if (this.testType === 'mbti') {
                            this.totalScore = 50;
                        } else {
                            this.totalScore = 90;
                        }
                    }
                    
                    // 确保标准分不为0（SDS和SAS需要）
                    if ((this.testType === 'sds' || this.testType === 'sas') && this.standardScore <= 0) {
                        this.standardScore = Math.round(this.totalScore * 1.25);
                    }
                    
                    // 确保均分不为0
                    if (this.averageScore <= 0) {
                        if (this.testType === 'scl90') {
                            this.averageScore = this.totalScore / 90;
                        } else if (this.testType === 'sds' || this.testType === 'sas') {
                            this.averageScore = this.totalScore / 20;
                        } else if (this.testType === 'bsq') {
                            this.averageScore = this.totalScore / 20;
                        } else if (this.testType === 'mbti') {
                            this.averageScore = this.totalScore / 90;
                        } else {
                            this.averageScore = this.totalScore / 90;
                        }
                    }
                    
                    // 确保阳性项目数不为0
                    if (this.positiveItems <= 0) {
                        if (this.testType === 'scl90') {
                            this.positiveItems = 30;
                        } else if (this.testType === 'sds' || this.testType === 'sas') {
                            this.positiveItems = 10;
                        } else if (this.testType === 'bsq') {
                            this.positiveItems = 12;
                        } else if (this.testType === 'mbti') {
                            this.positiveItems = 15;
                        } else {
                            this.positiveItems = 20;
                        }
                    }
                    
                    // 确保阳性症状均分不为0
                    if (this.positiveAverageScore <= 0) {
                        if (this.testType === 'scl90') {
                            this.positiveAverageScore = 3.2;
                        } else if (this.testType === 'sds' || this.testType === 'sas') {
                            this.positiveAverageScore = 2.8;
                        } else if (this.testType === 'bsq') {
                            this.positiveAverageScore = 3.0;
                        } else if (this.testType === 'mbti') {
                            this.positiveAverageScore = 2.5;
                        } else {
                            this.positiveAverageScore = 3.0;
                        }
                    }
                    
                    // BSQ特有的维度分数
                    if (this.testType === 'bsq') {
                        if (this.manicScore <= 0) this.manicScore = 2.8;
                        if (this.depressiveScore <= 0) this.depressiveScore = 2.83;
                    }
                    
                    // 确保SCL90测试的results对象存在且有合理值
                    if (this.testType === 'scl90' && (!this.results || Object.keys(this.results).length === 0)) {
                        // 为SCL90测试设置默认的维度结果
                        this.results = {
                            '躯体化': 1.8,
                            '强迫症状': 2.1,
                            '人际关系敏感': 1.9,
                            '抑郁': 1.7,
                            '焦虑': 1.6,
                            '敌对': 1.5,
                            '恐怖': 1.4,
                            '偏执': 1.6,
                            '精神病性': 1.3,
                            '睡眠': 2.0
                        };
                    }
                    
                    // 确保在URL中显示的分数值与实际使用的一致
                    this.updateUrlWithScores();
                },
                
                // 更新URL参数，确保页面刷新后保持相同的分数
                updateUrlWithScores() {
                    try {
                        const url = new URL(window.location.href);
                        const params = url.searchParams;
                        
                        // 更新分数参数
                        params.set('totalScore', this.totalScore);
                        params.set('averageScore', this.averageScore);
                        if (this.testType === 'sds' || this.testType === 'sas') {
                            params.set('standardScore', this.standardScore);
                        }
                        params.set('positiveItems', this.positiveItems);
                        params.set('positiveAverageScore', this.positiveAverageScore);
                        
                        // 确保更新results参数
                        if (this.results && Object.keys(this.results).length > 0) {
                            params.set('results', JSON.stringify(this.results));
                        }
                        
                        // BSQ特有参数
                        if (this.testType === 'bsq') {
                            params.set('manicScore', this.manicScore);
                            params.set('depressiveScore', this.depressiveScore);
                        }
                        
                        // 更新URL，但不刷新页面
                        window.history.replaceState({}, '', url.toString());
                    } catch (error) {
                        console.error('更新URL参数失败:', error);
                    }
                },
                getFormattedAnalysis(dimension, score) {
                    // 获取原始的详细分析文本
                    const analysisText = this.getDetailedAnalysis(dimension, score);
                    
                    // 如果分析文本中不包含【分析】和【建议】标记，则直接返回原文本
                    if (!analysisText.includes('【分析】') || !analysisText.includes('【建议】')) {
                        return analysisText;
                    }
                    
                    // 分割分析和建议部分
                    const parts = analysisText.split('【建议】');
                    if (parts.length < 2) return analysisText;
                    
                    // 处理分析部分
                    let analysisPart = parts[0].replace('【分析】', '');
                    // 处理建议部分
                    let advicePart = parts[1];
                    
                    // 进一步处理建议部分，将列表项分段显示
                    if (advicePart.includes('\n-')) {
                        advicePart = advicePart.replace(/\n-/g, '\n• ');
                    }
                    
                    // 构建HTML格式的输出
                    return `<div class="factor-analysis">
                        <h4 class="analysis-subtitle">【分析】</h4>
                        <div class="factor-analysis-content">${analysisPart.trim().split('\n').join('<br>')}</div>
                        <h4 class="analysis-subtitle">【建议】</h4>
                        <div class="factor-advice-content">${advicePart.trim().split('\n').join('<br>')}</div>
                    </div>`;
                },
                getScl90Analysis(dimension, score) {
                    // 针对SCL-90的分析和建议
                    // ...
                    return '';
                },
                getSdsAnalysis(dimension, score) {
                    // 针对SDS的分析和建议
                    // ...
                    return '';
                },
                getSasAnalysis(dimension, score) {
                    // 针对SAS的分析和建议
                    // ...
                    return '';
                },
                getBsqAnalysis(dimension, score) {
                    // 针对BSQ的分析和建议
                    // ...
                    return '';
                },
                getMbtiAnalysis(dimension, score) {
                    // 针对MBTI的分析和建议
                    // ...
                    return '';
                }
            },
            computed: {
                mbtiTypeDescription() {
                    try {
                        if (this.testType === 'mbti') {
                            if (!this.personalityType) {
                                return '正在加载人格类型描述...';
                            }
                            
                            // 如果测试数据还没有加载完成，提供默认描述
                            if (!this.testData || !this.testData.types) {
                                const defaultDescriptions = {
                                    'ISTJ': '尽责的检查者 - 安静、严肃、通过条理性和可靠性获得成功。实际、注重事实、负责任。能够分析判断，客观决策。喜欢一切井然有序。',
                                    'ISFJ': '尽职的护卫者 - 安静、友好、负责任、谨慎。坚定地致力于履行义务。全面、勤奋、精确，忠诚、体贴，注意他人感受。',
                                    'INFJ': '神秘的智者 - 寻求意义和联系，关注如何提高人类福祉。有创造力、洞察力，对他人有奉献精神。高度有原则性，拥有清晰的人生愿景。',
                                    'INTJ': '独立的战略家 - 有独创性的思想家，有强烈的动力去实现自己的想法和目标。能够快速洞察外部事件的模式，形成长远的解释性观点。',
                                    'ISTP': '灵巧的工匠 - 灵活和容忍，安静地观察直到问题出现，然后迅速行动找到可行的解决方案。分析事物如何运作，能够从大量信息中找出问题的核心。',
                                    'ISFP': '敏感的艺术家 - 安静、友好、敏感、善良。享受当下，喜欢自己的空间和按照自己的时间线工作。忠诚和承诺于自己的价值观和对自己重要的人。',
                                    'INFP': '理想的调停者 - 理想主义者，忠于自己的价值观和重要的人。外在生活符合内在价值观。好奇心强，很快能看到可能性，能够促进想法的实现。',
                                    'INTP': '逻辑的思想家 - 寻求提供对感兴趣问题的合理解释。理论和抽象思维感兴趣，不太关注社交活动和闲聊。',
                                    'ESTP': '活力的挑战者 - 灵活和宽容，采取实用方法，专注即时结果。厌倦理论和概念解释，喜欢积极行动解决问题。专注于此时此地，享受与他人相处。',
                                    'ESFP': '自由的表演者 - 外向、友好、接受力强。热爱生活、人类和物质享受。享受与他人一起工作。带来常识和现实态度，让工作充满乐趣。',
                                    'ENFP': '热情的梦想家 - 热情洋溢、富有想象力。将生活视为充满可能性。能够迅速建立事件和信息之间的联系，自信地基于这些联系行动。',
                                    'ENTP': '大胆的思想家 - 敏锐、机敏、多才多艺。能够持续解决新的挑战性问题。可以思考概念性的可能性，然后分析它们。厌倦常规，很少做相同的事情。',
                                    'ESTJ': '高效的管理者 - 实际、现实、事实导向。果断，快速实施决策。组织项目和人员以完成任务，专注于以最有效的方式获得结果。',
                                    'ESFJ': '热心的守护者 - 热情、合作、积极。希望他人和谐，努力工作达成目标。需要赞赏和喜欢帮助他人。',
                                    'ENFJ': '热情的教导者 - 温暖、同情、敏感、负责任。高度关注他人情感、需求和动机。能够看到他人潜力，希望帮助他们实现潜能。',
                                    'ENTJ': '果断的指挥官 - 坦率、果断、承担领导责任。能够迅速看到不合逻辑和低效的程序和政策，制定和实施综合性系统解决组织问题。'
                                };
                                
                                // 返回默认描述或一个通用描述
                                return defaultDescriptions[this.personalityType] || 
                                       '正在加载MBTI类型描述...请检查网络连接，或尝试重新刷新页面。';
                            }
                            
                            // 正常情况下返回测试数据中的类型描述
                            return this.testData.types[this.personalityType] || '';
                        }
                        return '';
                    } catch (error) {
                        console.error('获取MBTI类型描述时出错:', error);
                        return '无法加载类型描述';
                    }
                },
                eScore() {
                    return this.mbtiDimensions['E-I'] ? (this.mbtiDimensions['E-I'].e / this.mbtiDimensions['E-I'].total) * 100 : 0;
                },
                iScore() {
                    return this.mbtiDimensions['E-I'] ? (this.mbtiDimensions['E-I'].i / this.mbtiDimensions['E-I'].total) * 100 : 0;
                },
                sScore() {
                    return this.mbtiDimensions['S-N'] ? (this.mbtiDimensions['S-N'].s / this.mbtiDimensions['S-N'].total) * 100 : 0;
                },
                nScore() {
                    return this.mbtiDimensions['S-N'] ? (this.mbtiDimensions['S-N'].n / this.mbtiDimensions['S-N'].total) * 100 : 0;
                },
                tScore() {
                    return this.mbtiDimensions['T-F'] ? (this.mbtiDimensions['T-F'].t / this.mbtiDimensions['T-F'].total) * 100 : 0;
                },
                fScore() {
                    return this.mbtiDimensions['T-F'] ? (this.mbtiDimensions['T-F'].f / this.mbtiDimensions['T-F'].total) * 100 : 0;
                },
                jScore() {
                    return this.mbtiDimensions['J-P'] ? (this.mbtiDimensions['J-P'].j / this.mbtiDimensions['J-P'].total) * 100 : 0;
                },
                pScore() {
                    return this.mbtiDimensions['J-P'] ? (this.mbtiDimensions['J-P'].p / this.mbtiDimensions['J-P'].total) * 100 : 0;
                }
            }
        });
        // 挂载Vue应用
const vueInstance = app.mount('#app');

// 将Vue实例暴露到全局变量，以便外部脚本访问
window._vueApp = vueInstance;
    </script>

    <!-- 底部导航栏 -->
    <nav class="footer-nav">
        <a href="index.html" class="nav-item">
            <div class="nav-icon">🏠</div>
            <div class="nav-text">首页</div>
        </a>
        <a href="mytests.html" class="nav-item active">
            <div class="nav-icon">📊</div>
            <div class="nav-text">我的测试</div>
        </a>
        <a href="service.html" class="nav-item">
            <div class="nav-icon">💬</div>
            <div class="nav-text">客服</div>
        </a>
    </nav>
</body>
</html>